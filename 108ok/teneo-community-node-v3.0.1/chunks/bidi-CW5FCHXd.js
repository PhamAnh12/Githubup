var Zs=Object.defineProperty;var ei=Object.getPrototypeOf;var ti=Reflect.get;var rr=n=>{throw TypeError(n)};var ri=(n,s,r)=>s in n?Zs(n,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[s]=r;var A=(n,s,r)=>ri(n,typeof s!="symbol"?s+"":s,r),sr=(n,s,r)=>s.has(n)||rr("Cannot "+r),Nt=(n,s)=>Object(s)!==s?rr('Cannot use the "in" operator on this value'):n.has(s),t=(n,s,r)=>(sr(n,s,"read from private field"),r?r.call(n):s.get(n)),b=(n,s,r)=>s.has(n)?rr("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(n):s.set(n,r),x=(n,s,r,e)=>(sr(n,s,"write to private field"),e?e.call(n,r):s.set(n,r),r),R=(n,s,r)=>(sr(n,s,"access private method"),r);var Hr=(n,s,r)=>ti(ei(n),r,s);import*as Dr from"chromium-bidi/lib/cjs/bidiMapper/BidiMapper.js";import{C as si,D as ii,U as M,T as Tr,E as z,a as ni,b as Y,d as Or,c as Q,e as ce,f as B,i as be,t as $,g as ai,J as oi,h as ci,j as ui,A as os,k as di,s as cs,l as li,S as hi,H as fi,m as pi,n as qr,o as mi,q as wi,r as gi,u as yi,v as bi,w as vi,P as Ei,x as Ci,y as At,R as _i,z as Si,B as xi,F as ki,G as us,L as Ir,I as Br,K as Vr,W as Pi,M as Di,N as me,O as Rt,Q as ie,V as rt,X as Kr,Y as xe,Z as Lt,_ as Ti,$ as Oi,a0 as ji,a1 as Fi,a2 as ds,a3 as Ht,a4 as Ni,a5 as ir,a6 as Ri,a7 as Ai,a8 as ve,a9 as $i,aa as Mi,ab as we,ac as Ui,ad as zi,ae as Li,af as Hi,ag as qi,ah as Ii,ai as Wr,aj as Bi,ak as Vi,al as Zt,am as Ki,an as er,ao as tr,ap as Jr,aq as Wi,ar as Ji}from"../background.js";import*as Gi from"chromium-bidi/lib/cjs/protocol/protocol.js";import"./_virtual_wxt-plugins-CYLfT0K8.js";import"./general.config-osRriZOx.js";import"./constants-BKXh9xlg.js";var Pe,ge,de;const ke=class ke extends si{constructor(r,e){super();b(this,Pe,!1);b(this,ge);b(this,de,ii.create());A(this,"frame");A(this,"onClose",()=>{ke.sessions.delete(this.id()),x(this,Pe,!0)});if(this.frame=r,!this.frame.page().browser().cdpSupported)return;const i=this.frame.page().browser().connection;x(this,ge,i),e?(t(this,de).resolve(e),ke.sessions.set(e,this)):(async()=>{try{const{result:o}=await i.send("goog:cdp.getSession",{context:r._id});t(this,de).resolve(o.session),ke.sessions.set(o.session,this)}catch(o){t(this,de).reject(o)}})(),ke.sessions.set(t(this,de).value(),this)}connection(){}get detached(){return t(this,Pe)}async send(r,e,i){if(t(this,ge)===void 0)throw new M("CDP support is required for this feature. The current browser does not support CDP.");if(t(this,Pe))throw new Tr(`Protocol error (${r}): Session closed. Most likely the page has been closed.`);const o=await t(this,de).valueOrThrow(),{result:a}=await t(this,ge).send("goog:cdp.sendCommand",{method:r,params:e,session:o},i==null?void 0:i.timeout);return a.result}async detach(){if(!(t(this,ge)===void 0||t(this,ge).closed||t(this,Pe)))try{await this.frame.client.send("Target.detachFromTarget",{sessionId:this.id()})}finally{this.onClose()}}id(){const r=t(this,de).value();return typeof r=="string"?r:""}};Pe=new WeakMap,ge=new WeakMap,de=new WeakMap,A(ke,"sessions",new Map);let at=ke;/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const Xi=Or("puppeteer:webDriverBiDi:SEND ►"),Qi=Or("puppeteer:webDriverBiDi:RECV ◀");var ct,ne,Ie,ut,De,le,dt;class Yi extends z{constructor(r,e,i=0,o){super();b(this,ct);b(this,ne);b(this,Ie);b(this,ut,0);b(this,De,!1);b(this,le,new ni);b(this,dt,[]);x(this,ct,r),x(this,Ie,i),x(this,ut,o??18e4),x(this,ne,e),t(this,ne).onmessage=this.onMessage.bind(this),t(this,ne).onclose=this.unbind.bind(this)}get closed(){return t(this,De)}get url(){return t(this,ct)}pipeTo(r){t(this,dt).push(r)}emit(r,e){for(const i of t(this,dt))i.emit(r,e);return super.emit(r,e)}send(r,e,i){return Y(!t(this,De),"Protocol error: Connection closed."),t(this,le).create(r,i??t(this,ut),o=>{const a=JSON.stringify({id:o,method:r,params:e});Xi(a),t(this,ne).send(a)})}async onMessage(r){var i;t(this,Ie)&&await new Promise(o=>setTimeout(o,t(this,Ie))),Qi(r);const e=JSON.parse(r);if("type"in e)switch(e.type){case"success":t(this,le).resolve(e.id,e);return;case"error":if(e.id===null)break;t(this,le).reject(e.id,Zi(e),`${e.error}: ${e.message}`);return;case"event":if(en(e)){(i=at.sessions.get(e.params.session))==null||i.emit(e.params.event,e.params.params);return}this.emit(e.method,e.params);return}"id"in e&&t(this,le).reject(e.id,`Protocol Error. Message is not in BiDi protocol format: '${r}'`,e.message),Q(e)}unbind(){t(this,De)||(x(this,De,!0),t(this,ne).onmessage=()=>{},t(this,ne).onclose=()=>{},t(this,le).clear())}dispose(){this.unbind(),t(this,ne).close()}getPendingProtocolErrors(){return t(this,le).getPendingProtocolErrors()}}ct=new WeakMap,ne=new WeakMap,Ie=new WeakMap,ut=new WeakMap,De=new WeakMap,le=new WeakMap,dt=new WeakMap;function Zi(n){let s=`${n.error} ${n.message}`;return n.stacktrace&&(s+=` ${n.stacktrace}`),s}function en(n){return n.method.startsWith("goog:cdp.")}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */const tn=(n,...s)=>{Or(`bidi:${n}`)(s)};async function la(n){const s=new sn,r=new rn(n),e={send(a){s.emitMessage(JSON.parse(a))},close(){o.close(),r.close(),n.dispose()},onmessage(a){}};s.on("bidiResponse",a=>{e.onmessage(JSON.stringify(a))});const i=new Yi(n.url(),e,n.delay,n.timeout),o=await Dr.BidiServer.createAndStart(s,r,r.browserClient(),"",void 0,tn);return i}var lt,Te,Oe;class rn{constructor(s){b(this,lt);b(this,Te,new Map);b(this,Oe);x(this,lt,s),x(this,Oe,new Gr(s))}browserClient(){return t(this,Oe)}getCdpClient(s){const r=t(this,lt).session(s);if(!r)throw new Error(`Unknown CDP session with id ${s}`);if(!t(this,Te).has(r)){const e=new Gr(r,s,t(this,Oe));return t(this,Te).set(r,e),e}return t(this,Te).get(r)}close(){t(this,Oe).close();for(const s of t(this,Te).values())s.close()}}lt=new WeakMap,Te=new WeakMap,Oe=new WeakMap;var Be,je,ht,ft;class Gr extends Dr.EventEmitter{constructor(r,e,i){super();b(this,Be,!1);b(this,je);A(this,"sessionId");b(this,ht);b(this,ft,(r,e)=>{this.emit(r,e)});x(this,je,r),this.sessionId=e,x(this,ht,i),t(this,je).on("*",t(this,ft))}browserClient(){return t(this,ht)}async sendCommand(r,...e){if(!t(this,Be))try{return await t(this,je).send(r,...e)}catch(i){if(t(this,Be))return;throw i}}close(){t(this,je).off("*",t(this,ft)),x(this,Be,!0)}isCloseError(r){return r instanceof Tr}}Be=new WeakMap,je=new WeakMap,ht=new WeakMap,ft=new WeakMap;var Ve;class sn extends Dr.EventEmitter{constructor(){super(...arguments);b(this,Ve,async r=>{})}emitMessage(r){t(this,Ve).call(this,r)}setOnMessage(r){x(this,Ve,r)}async sendMessage(r){this.emit("bidiResponse",r)}close(){x(this,Ve,async r=>{})}}Ve=new WeakMap;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var nn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},an=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0};let on=(()=>{var e,i,o,a,d,m,ls,$t,hs,w;let n=z,s=[],r;return w=class extends n{constructor(y){super();b(this,m);b(this,e,nn(this,s));b(this,i);b(this,o);b(this,a,new ce);b(this,d);x(this,o,y)}static from(y){var p;const h=new w(y);return R(p=h,m,ls).call(p),h}get disposed(){return t(this,a).disposed}get request(){return t(this,e)}get navigation(){return t(this,i)}dispose(){this[B]()}[(r=[be],B)](){t(this,a).dispose(),super[B]()}},e=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,d=new WeakMap,m=new WeakSet,ls=function(){const y=t(this,a).use(new z(t(this,o)));y.once("closed",()=>{this.emit("failed",{url:t(this,o).url,timestamp:new Date}),this.dispose()}),y.on("request",({request:p})=>{if(p.navigation===void 0||!R(this,m,$t).call(this,p.navigation))return;x(this,e,p),this.emit("request",p),t(this,a).use(new z(t(this,e))).on("redirect",P=>{x(this,e,P)})});const h=t(this,a).use(new z(t(this,m,hs)));h.on("browsingContext.navigationStarted",p=>{p.context!==t(this,o).id||t(this,i)!==void 0||x(this,i,w.from(t(this,o)))});for(const p of["browsingContext.domContentLoaded","browsingContext.load"])h.on(p,T=>{T.context!==t(this,o).id||T.navigation===null||!R(this,m,$t).call(this,T.navigation)||this.dispose()});for(const[p,T]of[["browsingContext.fragmentNavigated","fragment"],["browsingContext.navigationFailed","failed"],["browsingContext.navigationAborted","aborted"]])h.on(p,P=>{P.context!==t(this,o).id||!R(this,m,$t).call(this,P.navigation)||(this.emit(T,{url:P.url,timestamp:new Date(P.timestamp)}),this.dispose())})},$t=function(y){return t(this,i)!==void 0&&!t(this,i).disposed?!1:t(this,d)===void 0?(x(this,d,y),!0):t(this,d)===y},hs=function(){return t(this,o).userContext.browser.session},(()=>{const y=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;an(w,null,r,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:h=>"dispose"in h,get:h=>h.dispose},metadata:y},null,s),y&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y})})(),w})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var cn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},st=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0},cr;let jr=(()=>{var d,m;let n=z,s=[],r,e,i,o,a;return m=class extends n{constructor(u,w){super();b(this,d,cn(this,s));A(this,"disposables",new ce);A(this,"id");A(this,"origin");A(this,"executionContextId");this.id=u,this.origin=w}get disposed(){return t(this,d)!==void 0}get target(){return{realm:this.id}}dispose(u){x(this,d,u),this[B]()}async disown(u){await this.session.send("script.disown",{target:this.target,handles:u})}async callFunction(u,w,g={}){const{result:S}=await this.session.send("script.callFunction",{functionDeclaration:u,awaitPromise:w,target:this.target,...g});return S}async evaluate(u,w,g={}){const{result:S}=await this.session.send("script.evaluate",{expression:u,awaitPromise:w,target:this.target,...g});return S}async resolveExecutionContextId(){if(!this.executionContextId){const{result:u}=await this.session.connection.send("goog:cdp.resolveRealm",{realm:this.id});this.executionContextId=u.executionContextId}return this.executionContextId}[(r=[be],e=[$(u=>t(u,d))],i=[$(u=>t(u,d))],o=[$(u=>t(u,d))],a=[$(u=>t(u,d))],B)](){t(this,d)??x(this,d,"Realm already destroyed, probably because all associated browsing contexts closed."),this.emit("destroyed",{reason:t(this,d)}),this.disposables.dispose(),super[B]()}},d=new WeakMap,(()=>{const u=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;st(m,null,r,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:w=>"dispose"in w,get:w=>w.dispose},metadata:u},null,s),st(m,null,e,{kind:"method",name:"disown",static:!1,private:!1,access:{has:w=>"disown"in w,get:w=>w.disown},metadata:u},null,s),st(m,null,i,{kind:"method",name:"callFunction",static:!1,private:!1,access:{has:w=>"callFunction"in w,get:w=>w.callFunction},metadata:u},null,s),st(m,null,o,{kind:"method",name:"evaluate",static:!1,private:!1,access:{has:w=>"evaluate"in w,get:w=>w.evaluate},metadata:u},null,s),st(m,null,a,{kind:"method",name:"resolveExecutionContextId",static:!1,private:!1,access:{has:w=>"resolveExecutionContextId"in w,get:w=>w.resolveExecutionContextId},metadata:u},null,s),u&&Object.defineProperty(m,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:u})})(),m})();var pt,Kt,fs;const Nr=class Nr extends jr{constructor(r,e){super("","");b(this,Kt);A(this,"browsingContext");A(this,"sandbox");b(this,pt,new Map);this.browsingContext=r,this.sandbox=e}static from(r,e){var o;const i=new Nr(r,e);return R(o=i,Kt,fs).call(o),i}get session(){return this.browsingContext.userContext.browser.session}get target(){return{context:this.browsingContext.id,sandbox:this.sandbox}}};pt=new WeakMap,Kt=new WeakSet,fs=function(){this.disposables.use(new z(this.browsingContext)).on("closed",({reason:i})=>{this.dispose(i)});const e=this.disposables.use(new z(this.session));e.on("script.realmCreated",i=>{i.type!=="window"||i.context!==this.browsingContext.id||i.sandbox!==this.sandbox||(this.id=i.realm,this.origin=i.origin,this.executionContextId=void 0,this.emit("updated",this))}),e.on("script.realmCreated",i=>{if(i.type!=="dedicated-worker"||!i.owners.includes(this.id))return;const o=Fr.from(this,i.realm,i.origin);t(this,pt).set(o.id,o);const a=this.disposables.use(new z(o));a.once("destroyed",()=>{a.removeAllListeners(),t(this,pt).delete(o.id)}),this.emit("worker",o)})};let ur=Nr;var mt,Wt,ps;class Fr extends jr{constructor(r,e,i){super(e,i);b(this,Wt);b(this,mt,new Map);A(this,"owners");this.owners=new Set([r])}static from(r,e,i){var a;const o=new cr(r,e,i);return R(a=o,Wt,ps).call(a),o}get session(){return this.owners.values().next().value.session}}mt=new WeakMap,Wt=new WeakSet,ps=function(){const r=this.disposables.use(new z(this.session));r.on("script.realmDestroyed",e=>{e.realm===this.id&&this.dispose("Realm already destroyed.")}),r.on("script.realmCreated",e=>{if(e.type!=="dedicated-worker"||!e.owners.includes(this.id))return;const i=cr.from(this,e.realm,e.origin);t(this,mt).set(i.id,i),this.disposables.use(new z(i)).once("destroyed",()=>{t(this,mt).delete(i.id)}),this.emit("worker",i)})};cr=Fr;var wt,Jt,ms;const Rr=class Rr extends jr{constructor(r,e,i){super(e,i);b(this,Jt);b(this,wt,new Map);A(this,"browser");this.browser=r}static from(r,e,i){var a;const o=new Rr(r,e,i);return R(a=o,Jt,ms).call(a),o}get session(){return this.browser.session}};wt=new WeakMap,Jt=new WeakSet,ms=function(){const r=this.disposables.use(new z(this.session));r.on("script.realmDestroyed",e=>{e.realm===this.id&&this.dispose("Realm already destroyed.")}),r.on("script.realmCreated",e=>{if(e.type!=="dedicated-worker"||!e.owners.includes(this.id))return;const i=Fr.from(this,e.realm,e.origin);t(this,wt).set(i.id,i),this.disposables.use(new z(i)).once("destroyed",()=>{t(this,wt).delete(i.id)}),this.emit("worker",i)})};let dr=Rr;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var un=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},dn=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0};let ln=(()=>{var e,i,o,a,d,m,f,ws,Ce,w;let n=z,s=[],r;return w=class extends n{constructor(y,h){super();b(this,f);b(this,e,un(this,s));b(this,i);b(this,o);b(this,a);b(this,d,new ce);b(this,m);x(this,a,y),x(this,m,h)}static from(y,h){var T;const p=new w(y,h);return R(T=p,f,ws).call(T),p}get disposed(){return t(this,d).disposed}get error(){return t(this,e)}get headers(){return t(this,m).request.headers}get id(){return t(this,m).request.request}get initiator(){return t(this,m).initiator}get method(){return t(this,m).request.method}get navigation(){return t(this,m).navigation??void 0}get redirect(){return t(this,i)}get lastRedirect(){let y=t(this,i);for(;y;){if(y&&!t(y,i))return y;y=t(y,i)}return y}get response(){return t(this,o)}get url(){return t(this,m).request.url}get isBlocked(){return t(this,m).isBlocked}get resourceType(){return t(this,m).request["goog:resourceType"]??void 0}get postData(){return t(this,m).request["goog:postData"]??void 0}get hasPostData(){return t(this,m).request["goog:hasPostData"]??!1}async continueRequest({url:y,method:h,headers:p,cookies:T,body:P}){await t(this,f,Ce).send("network.continueRequest",{request:this.id,url:y,method:h,headers:p,body:P,cookies:T})}async failRequest(){await t(this,f,Ce).send("network.failRequest",{request:this.id})}async provideResponse({statusCode:y,reasonPhrase:h,headers:p,body:T}){await t(this,f,Ce).send("network.provideResponse",{request:this.id,statusCode:y,reasonPhrase:h,headers:p,body:T})}async continueWithAuth(y){y.action==="provideCredentials"?await t(this,f,Ce).send("network.continueWithAuth",{request:this.id,action:y.action,credentials:y.credentials}):await t(this,f,Ce).send("network.continueWithAuth",{request:this.id,action:y.action})}dispose(){this[B]()}[(r=[be],B)](){t(this,d).dispose(),super[B]()}timing(){return t(this,m).request.timings}},e=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,d=new WeakMap,m=new WeakMap,f=new WeakSet,ws=function(){t(this,d).use(new z(t(this,a))).once("closed",({reason:p})=>{x(this,e,p),this.emit("error",t(this,e)),this.dispose()});const h=t(this,d).use(new z(t(this,f,Ce)));h.on("network.beforeRequestSent",p=>{p.context!==t(this,a).id||p.request.request!==this.id||p.redirectCount!==t(this,m).redirectCount+1||(x(this,i,w.from(t(this,a),p)),this.emit("redirect",t(this,i)),this.dispose())}),h.on("network.authRequired",p=>{p.context!==t(this,a).id||p.request.request!==this.id||!p.isBlocked||this.emit("authenticate",void 0)}),h.on("network.fetchError",p=>{p.context!==t(this,a).id||p.request.request!==this.id||t(this,m).redirectCount!==p.redirectCount||(x(this,e,p.errorText),this.emit("error",t(this,e)),this.dispose())}),h.on("network.responseCompleted",p=>{p.context!==t(this,a).id||p.request.request!==this.id||t(this,m).redirectCount!==p.redirectCount||(x(this,o,p.response),t(this,m).request.timings=p.request.timings,this.emit("success",t(this,o)),!(t(this,o).status>=300&&t(this,o).status<400)&&this.dispose())})},Ce=function(){return t(this,a).userContext.browser.session},(()=>{const y=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;dn(w,null,r,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:h=>"dispose"in h,get:h=>h.dispose},metadata:y},null,s),y&&Object.defineProperty(w,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:y})})(),w})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var hn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},Xr=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0};let fn=(()=>{var i,o,a,d,gs,lr,l;let n=z,s=[],r,e;return l=class extends n{constructor(g,S){super();b(this,d);b(this,i,hn(this,s));b(this,o);b(this,a,new ce);A(this,"browsingContext");A(this,"info");this.browsingContext=g,this.info=S}static from(g,S){var h;const y=new l(g,S);return R(h=y,d,gs).call(h),y}get closed(){return t(this,i)!==void 0}get disposed(){return this.closed}get handled(){return this.info.handler==="accept"||this.info.handler==="dismiss"?!0:t(this,o)!==void 0}get result(){return t(this,o)}dispose(g){x(this,i,g),this[B]()}async handle(g={}){return await t(this,d,lr).send("browsingContext.handleUserPrompt",{...g,context:this.info.context}),t(this,o)}[(r=[be],e=[$(g=>t(g,i))],B)](){t(this,i)??x(this,i,"User prompt already closed, probably because the associated browsing context was destroyed."),this.emit("closed",{reason:t(this,i)}),t(this,a).dispose(),super[B]()}},i=new WeakMap,o=new WeakMap,a=new WeakMap,d=new WeakSet,gs=function(){t(this,a).use(new z(this.browsingContext)).once("closed",({reason:y})=>{this.dispose(`User prompt already closed: ${y}`)}),t(this,a).use(new z(t(this,d,lr))).on("browsingContext.userPromptClosed",y=>{y.context===this.browsingContext.id&&(x(this,o,y),this.emit("handled",y),this.dispose("User prompt already handled."))})},lr=function(){return this.browsingContext.userContext.browser.session},(()=>{const g=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;Xr(l,null,r,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:S=>"dispose"in S,get:S=>S.dispose},metadata:g},null,s),Xr(l,null,e,{kind:"method",name:"handle",static:!1,private:!1,access:{has:S=>"handle"in S,get:S=>S.handle},metadata:g},null,s),g&&Object.defineProperty(l,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:g})})(),l})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var pn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},V=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0};let mn=(()=>{var F,_,N,L,W,re,te,q,ys,J,hr,H;let n=z,s=[],r,e,i,o,a,d,m,f,l,u,w,g,S,y,h,p,T,P,D,O,j,E,c,k;return H=class extends n{constructor(C,v,U,X,se){super();b(this,q);b(this,F,pn(this,s));b(this,_);b(this,N);b(this,L,new Map);b(this,W,new ce);b(this,re,new Map);b(this,te,new Map);A(this,"defaultRealm");A(this,"id");A(this,"parent");A(this,"userContext");A(this,"originalOpener");x(this,N,X),this.id=U,this.parent=v,this.userContext=C,this.originalOpener=se,this.defaultRealm=R(this,q,hr).call(this)}static from(C,v,U,X,se){var Lr;const ze=new H(C,v,U,X,se);return R(Lr=ze,q,ys).call(Lr),ze}get children(){return t(this,L).values()}get closed(){return t(this,_)!==void 0}get disposed(){return this.closed}get realms(){const C=this;return function*(){yield C.defaultRealm,yield*t(C,re).values()}()}get top(){let C=this;for(let{parent:v}=C;v;{parent:v}=C)C=v;return C}get url(){return t(this,N)}dispose(C){x(this,_,C);for(const v of t(this,L).values())v.dispose("Parent browsing context was disposed");this[B]()}async activate(){await t(this,q,J).send("browsingContext.activate",{context:this.id})}async captureScreenshot(C={}){const{result:{data:v}}=await t(this,q,J).send("browsingContext.captureScreenshot",{context:this.id,...C});return v}async close(C){await Promise.all([...t(this,L).values()].map(async v=>{await v.close(C)})),await t(this,q,J).send("browsingContext.close",{context:this.id,promptUnload:C})}async traverseHistory(C){await t(this,q,J).send("browsingContext.traverseHistory",{context:this.id,delta:C})}async navigate(C,v){await t(this,q,J).send("browsingContext.navigate",{context:this.id,url:C,wait:v})}async reload(C={}){await t(this,q,J).send("browsingContext.reload",{context:this.id,...C})}async setCacheBehavior(C){await t(this,q,J).send("network.setCacheBehavior",{contexts:[this.id],cacheBehavior:C})}async print(C={}){const{result:{data:v}}=await t(this,q,J).send("browsingContext.print",{context:this.id,...C});return v}async handleUserPrompt(C={}){await t(this,q,J).send("browsingContext.handleUserPrompt",{context:this.id,...C})}async setViewport(C={}){await t(this,q,J).send("browsingContext.setViewport",{context:this.id,...C})}async performActions(C){await t(this,q,J).send("input.performActions",{context:this.id,actions:C})}async releaseActions(){await t(this,q,J).send("input.releaseActions",{context:this.id})}createWindowRealm(C){return R(this,q,hr).call(this,C)}async addPreloadScript(C,v={}){return await this.userContext.browser.addPreloadScript(C,{...v,contexts:[this]})}async addIntercept(C){const{result:{intercept:v}}=await this.userContext.browser.session.send("network.addIntercept",{...C,contexts:[this.id]});return v}async removePreloadScript(C){await this.userContext.browser.removePreloadScript(C)}async getCookies(C={}){const{result:{cookies:v}}=await t(this,q,J).send("storage.getCookies",{...C,partition:{type:"context",context:this.id}});return v}async setCookie(C){await t(this,q,J).send("storage.setCookie",{cookie:C,partition:{type:"context",context:this.id}})}async setFiles(C,v){await t(this,q,J).send("input.setFiles",{context:this.id,element:C,files:v})}async subscribe(C){await t(this,q,J).subscribe(C,[this.id])}async addInterception(C){await t(this,q,J).subscribe(C,[this.id])}[(r=[be],e=[$(C=>t(C,_))],i=[$(C=>t(C,_))],o=[$(C=>t(C,_))],a=[$(C=>t(C,_))],d=[$(C=>t(C,_))],m=[$(C=>t(C,_))],f=[$(C=>t(C,_))],l=[$(C=>t(C,_))],u=[$(C=>t(C,_))],w=[$(C=>t(C,_))],g=[$(C=>t(C,_))],S=[$(C=>t(C,_))],y=[$(C=>t(C,_))],h=[$(C=>t(C,_))],p=[$(C=>t(C,_))],T=[$(C=>t(C,_))],P=[$(C=>t(C,_))],D=[$(C=>t(C,_))],O=[$(C=>t(C,_))],j=[$(C=>t(C,_))],E=[$(C=>t(C,_))],B)](){t(this,_)??x(this,_,"Browsing context already closed, probably because the user context closed."),this.emit("closed",{reason:t(this,_)}),t(this,W).dispose(),super[B]()}async deleteCookie(...C){await Promise.all(C.map(async v=>{await t(this,q,J).send("storage.deleteCookies",{filter:v,partition:{type:"context",context:this.id}})}))}async locateNodes(C,v){return(await t(this,q,J).send("browsingContext.locateNodes",{context:this.id,locator:C,startNodes:v.length?v:void 0})).result.nodes}},F=new WeakMap,_=new WeakMap,N=new WeakMap,L=new WeakMap,W=new WeakMap,re=new WeakMap,te=new WeakMap,q=new WeakSet,ys=function(){t(this,W).use(new z(this.userContext)).once("closed",({reason:U})=>{this.dispose(`Browsing context already closed: ${U}`)});const v=t(this,W).use(new z(t(this,q,J)));v.on("browsingContext.contextCreated",U=>{if(U.parent!==this.id)return;const X=H.from(this.userContext,this,U.context,U.url,U.originalOpener);t(this,L).set(U.context,X);const se=t(this,W).use(new z(X));se.once("closed",()=>{se.removeAllListeners(),t(this,L).delete(X.id)}),this.emit("browsingcontext",{browsingContext:X})}),v.on("browsingContext.contextDestroyed",U=>{U.context===this.id&&this.dispose("Browsing context already closed.")}),v.on("browsingContext.historyUpdated",U=>{U.context===this.id&&(x(this,N,U.url),this.emit("historyUpdated",void 0))}),v.on("browsingContext.domContentLoaded",U=>{U.context===this.id&&(x(this,N,U.url),this.emit("DOMContentLoaded",void 0))}),v.on("browsingContext.load",U=>{U.context===this.id&&(x(this,N,U.url),this.emit("load",void 0))}),v.on("browsingContext.navigationStarted",U=>{if(U.context!==this.id)return;for(const[se,ze]of t(this,te))ze.disposed&&t(this,te).delete(se);if(t(this,F)!==void 0&&!t(this,F).disposed)return;x(this,F,on.from(this));const X=t(this,W).use(new z(t(this,F)));for(const se of["fragment","failed","aborted"])X.once(se,({url:ze})=>{X[B](),x(this,N,ze)});this.emit("navigation",{navigation:t(this,F)})}),v.on("network.beforeRequestSent",U=>{if(U.context!==this.id||t(this,te).has(U.request.request))return;const X=ln.from(this,U);t(this,te).set(X.id,X),this.emit("request",{request:X})}),v.on("log.entryAdded",U=>{U.source.context===this.id&&this.emit("log",{entry:U})}),v.on("browsingContext.userPromptOpened",U=>{if(U.context!==this.id)return;const X=fn.from(this,U);this.emit("userprompt",{userPrompt:X})})},J=function(){return this.userContext.browser.session},hr=function(C){const v=ur.from(this,C);return v.on("worker",U=>{this.emit("worker",{realm:U})}),v},(()=>{const C=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;c=[$(v=>t(v,_))],k=[$(v=>t(v,_))],V(H,null,r,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:v=>"dispose"in v,get:v=>v.dispose},metadata:C},null,s),V(H,null,e,{kind:"method",name:"activate",static:!1,private:!1,access:{has:v=>"activate"in v,get:v=>v.activate},metadata:C},null,s),V(H,null,i,{kind:"method",name:"captureScreenshot",static:!1,private:!1,access:{has:v=>"captureScreenshot"in v,get:v=>v.captureScreenshot},metadata:C},null,s),V(H,null,o,{kind:"method",name:"close",static:!1,private:!1,access:{has:v=>"close"in v,get:v=>v.close},metadata:C},null,s),V(H,null,a,{kind:"method",name:"traverseHistory",static:!1,private:!1,access:{has:v=>"traverseHistory"in v,get:v=>v.traverseHistory},metadata:C},null,s),V(H,null,d,{kind:"method",name:"navigate",static:!1,private:!1,access:{has:v=>"navigate"in v,get:v=>v.navigate},metadata:C},null,s),V(H,null,m,{kind:"method",name:"reload",static:!1,private:!1,access:{has:v=>"reload"in v,get:v=>v.reload},metadata:C},null,s),V(H,null,f,{kind:"method",name:"setCacheBehavior",static:!1,private:!1,access:{has:v=>"setCacheBehavior"in v,get:v=>v.setCacheBehavior},metadata:C},null,s),V(H,null,l,{kind:"method",name:"print",static:!1,private:!1,access:{has:v=>"print"in v,get:v=>v.print},metadata:C},null,s),V(H,null,u,{kind:"method",name:"handleUserPrompt",static:!1,private:!1,access:{has:v=>"handleUserPrompt"in v,get:v=>v.handleUserPrompt},metadata:C},null,s),V(H,null,w,{kind:"method",name:"setViewport",static:!1,private:!1,access:{has:v=>"setViewport"in v,get:v=>v.setViewport},metadata:C},null,s),V(H,null,g,{kind:"method",name:"performActions",static:!1,private:!1,access:{has:v=>"performActions"in v,get:v=>v.performActions},metadata:C},null,s),V(H,null,S,{kind:"method",name:"releaseActions",static:!1,private:!1,access:{has:v=>"releaseActions"in v,get:v=>v.releaseActions},metadata:C},null,s),V(H,null,y,{kind:"method",name:"createWindowRealm",static:!1,private:!1,access:{has:v=>"createWindowRealm"in v,get:v=>v.createWindowRealm},metadata:C},null,s),V(H,null,h,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:v=>"addPreloadScript"in v,get:v=>v.addPreloadScript},metadata:C},null,s),V(H,null,p,{kind:"method",name:"addIntercept",static:!1,private:!1,access:{has:v=>"addIntercept"in v,get:v=>v.addIntercept},metadata:C},null,s),V(H,null,T,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:v=>"removePreloadScript"in v,get:v=>v.removePreloadScript},metadata:C},null,s),V(H,null,P,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:v=>"getCookies"in v,get:v=>v.getCookies},metadata:C},null,s),V(H,null,D,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:v=>"setCookie"in v,get:v=>v.setCookie},metadata:C},null,s),V(H,null,O,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:v=>"setFiles"in v,get:v=>v.setFiles},metadata:C},null,s),V(H,null,j,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:v=>"subscribe"in v,get:v=>v.subscribe},metadata:C},null,s),V(H,null,E,{kind:"method",name:"addInterception",static:!1,private:!1,access:{has:v=>"addInterception"in v,get:v=>v.addInterception},metadata:C},null,s),V(H,null,c,{kind:"method",name:"deleteCookie",static:!1,private:!1,access:{has:v=>"deleteCookie"in v,get:v=>v.deleteCookie},metadata:C},null,s),V(H,null,k,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:v=>"locateNodes"in v,get:v=>v.locateNodes},metadata:C},null,s),C&&Object.defineProperty(H,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:C})})(),H})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var wn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},Le=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0};let qt=(()=>{var m,f,l,u,w,g,bs,_e;let n=z,s=[],r,e,i,o,a,d;return m=class extends n{constructor(T,P){super();b(this,g);b(this,f,wn(this,s));b(this,l,new Map);b(this,u,new ce);b(this,w);A(this,"browser");x(this,w,P),this.browser=T}static create(T,P){var O;const D=new m(T,P);return R(O=D,g,bs).call(O),D}get browsingContexts(){return t(this,l).values()}get closed(){return t(this,f)!==void 0}get disposed(){return this.closed}get id(){return t(this,w)}dispose(T){x(this,f,T),this[B]()}async createBrowsingContext(T,P={}){var j;const{result:{context:D}}=await t(this,g,_e).send("browsingContext.create",{type:T,...P,referenceContext:(j=P.referenceContext)==null?void 0:j.id,userContext:t(this,w)}),O=t(this,l).get(D);return Y(O,"The WebDriver BiDi implementation is failing to create a browsing context correctly."),O}async remove(){try{await t(this,g,_e).send("browser.removeUserContext",{userContext:t(this,w)})}finally{this.dispose("User context already closed.")}}async getCookies(T={},P=void 0){const{result:{cookies:D}}=await t(this,g,_e).send("storage.getCookies",{...T,partition:{type:"storageKey",userContext:t(this,w),sourceOrigin:P}});return D}async setCookie(T,P){await t(this,g,_e).send("storage.setCookie",{cookie:T,partition:{type:"storageKey",sourceOrigin:P,userContext:this.id}})}async setPermissions(T,P,D){await t(this,g,_e).send("permissions.setPermission",{origin:T,descriptor:P,state:D,userContext:t(this,w)})}[(r=[be],e=[$(T=>t(T,f))],i=[$(T=>t(T,f))],o=[$(T=>t(T,f))],a=[$(T=>t(T,f))],d=[$(T=>t(T,f))],B)](){t(this,f)??x(this,f,"User context already closed, probably because the browser disconnected/closed."),this.emit("closed",{reason:t(this,f)}),t(this,u).dispose(),super[B]()}},f=new WeakMap,l=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakSet,bs=function(){const T=t(this,u).use(new z(this.browser));T.once("closed",({reason:D})=>{this.dispose(`User context was closed: ${D}`)}),T.once("disconnected",({reason:D})=>{this.dispose(`User context was closed: ${D}`)}),t(this,u).use(new z(t(this,g,_e))).on("browsingContext.contextCreated",D=>{if(D.parent||D.userContext!==t(this,w))return;const O=mn.from(this,void 0,D.context,D.url,D.originalOpener);t(this,l).set(O.id,O);const j=t(this,u).use(new z(O));j.on("closed",()=>{j.removeAllListeners(),t(this,l).delete(O.id)}),this.emit("browsingcontext",{browsingContext:O})})},_e=function(){return this.browser.session},(()=>{const T=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;Le(m,null,r,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:P=>"dispose"in P,get:P=>P.dispose},metadata:T},null,s),Le(m,null,e,{kind:"method",name:"createBrowsingContext",static:!1,private:!1,access:{has:P=>"createBrowsingContext"in P,get:P=>P.createBrowsingContext},metadata:T},null,s),Le(m,null,i,{kind:"method",name:"remove",static:!1,private:!1,access:{has:P=>"remove"in P,get:P=>P.remove},metadata:T},null,s),Le(m,null,o,{kind:"method",name:"getCookies",static:!1,private:!1,access:{has:P=>"getCookies"in P,get:P=>P.getCookies},metadata:T},null,s),Le(m,null,a,{kind:"method",name:"setCookie",static:!1,private:!1,access:{has:P=>"setCookie"in P,get:P=>P.setCookie},metadata:T},null,s),Le(m,null,d,{kind:"method",name:"setPermissions",static:!1,private:!1,access:{has:P=>"setPermissions"in P,get:P=>P.setPermissions},metadata:T},null,s),T&&Object.defineProperty(m,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:T})})(),A(m,"DEFAULT","default"),m})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Ue,vs,fr;class Ft{static deserialize(s){var r,e,i,o;if(!s){Q("Service did not produce a result.");return}switch(s.type){case"array":return(r=s.value)==null?void 0:r.map(a=>this.deserialize(a));case"set":return(e=s.value)==null?void 0:e.reduce((a,d)=>a.add(this.deserialize(d)),new Set);case"object":return(i=s.value)==null?void 0:i.reduce((a,d)=>{const{key:m,value:f}=R(this,Ue,fr).call(this,d);return a[m]=f,a},{});case"map":return(o=s.value)==null?void 0:o.reduce((a,d)=>{const{key:m,value:f}=R(this,Ue,fr).call(this,d);return a.set(m,f)},new Map);case"promise":return{};case"regexp":return new RegExp(s.value.pattern,s.value.flags);case"date":return new Date(s.value);case"undefined":return;case"null":return null;case"number":return R(this,Ue,vs).call(this,s.value);case"bigint":return BigInt(s.value);case"boolean":return!!s.value;case"string":return s.value}Q(`Deserialization of type ${s.type} not supported.`)}}Ue=new WeakSet,vs=function(s){switch(s){case"-0":return-0;case"NaN":return NaN;case"Infinity":return 1/0;case"-Infinity":return-1/0;default:return s}},fr=function([s,r]){const e=typeof s=="string"?s:this.deserialize(s),i=this.deserialize(r);return{key:e,value:i}},b(Ft,Ue);/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var gt;const Ar=class Ar extends ai{constructor(r){super(r.info.type,r.info.message,r.info.defaultValue);b(this,gt);x(this,gt,r),this.handled=r.handled}static from(r){return new Ar(r)}async handle(r){await t(this,gt).handle({accept:r.accept,userText:r.text})}};gt=new WeakMap;let pr=Ar;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ae,Ke;const $r=class $r extends oi{constructor(r,e){super();b(this,ae);A(this,"realm");b(this,Ke,!1);x(this,ae,r),this.realm=e}static from(r,e){return new $r(r,e)}get disposed(){return t(this,Ke)}async jsonValue(){return await this.evaluate(r=>r)}asElement(){return null}async dispose(){t(this,Ke)||(x(this,Ke,!0),await this.realm.destroyHandles([this]))}get isPrimitiveValue(){switch(t(this,ae).type){case"string":case"number":case"bigint":case"boolean":case"undefined":case"null":return!0;default:return!1}}toString(){return this.isPrimitiveValue?"JSHandle:"+Ft.deserialize(t(this,ae)):"JSHandle@"+t(this,ae).type}get id(){return"handle"in t(this,ae)?t(this,ae).handle:void 0}remoteValue(){return t(this,ae)}remoteObject(){throw new M("Not available in WebDriver BiDi")}};ae=new WeakMap,Ke=new WeakMap;let Me=$r;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var gn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},Qr=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0},yn=function(n,s,r){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var e,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=s[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=s[Symbol.dispose],r&&(i=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");i&&(e=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:s,dispose:e,async:r})}else r&&n.stack.push({async:!0});return s},bn=function(n){return function(s){function r(a){s.error=s.hasError?new n(a,s.error,"An error was suppressed during disposal."):a,s.hasError=!0}var e,i=0;function o(){for(;e=s.stack.pop();)try{if(!e.async&&i===1)return i=0,s.stack.push(e),Promise.resolve().then(o);if(e.dispose){var a=e.dispose.call(e.value);if(e.async)return i|=2,Promise.resolve(a).then(o,function(d){return r(d),o()})}else i|=1}catch(d){r(d)}if(i===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return o()}}(typeof SuppressedError=="function"?SuppressedError:function(n,s,r){var e=new Error(r);return e.name="SuppressedError",e.error=n,e.suppressed=s,e});let It=(()=>{var i,o;let n=ci,s=[],r,e;return o=class extends n{constructor(m,f){super(Me.from(m,f));b(this,i,gn(this,s))}static from(m,f){return new o(m,f)}get realm(){return this.handle.realm}get frame(){return this.realm.environment}remoteValue(){return this.handle.remoteValue()}async autofill(m){const f=this.frame.client,u=(await f.send("DOM.describeNode",{objectId:this.handle.id})).node.backendNodeId,w=this.frame._id;await f.send("Autofill.trigger",{fieldId:u,frameId:w,card:m.creditCard})}async contentFrame(){const m={stack:[],error:void 0,hasError:!1};try{const l=yn(m,await this.evaluateHandle(u=>{if(u instanceof HTMLIFrameElement||u instanceof HTMLFrameElement)return u.contentWindow}),!1).remoteValue();return l.type==="window"?this.frame.page().frames().find(u=>u._id===l.value.context)??null:null}catch(f){m.error=f,m.hasError=!0}finally{bn(m)}}async uploadFile(...m){const f=ui.value.path;f&&(m=m.map(l=>f.win32.isAbsolute(l)||f.posix.isAbsolute(l)?l:f.resolve(l))),await this.frame.setFiles(this,m)}async*queryAXTree(m,f){const l=await this.frame.locateNodes(this,{type:"accessibility",value:{role:f,name:m}});return yield*os.map(l,u=>Promise.resolve(o.from(u,this.realm)))}async backendNodeId(){if(!this.frame.page().browser().cdpSupported)throw new M;if(t(this,i))return t(this,i);const{node:m}=await this.frame.client.send("DOM.describeNode",{objectId:this.handle.id});return x(this,i,m.backendNodeId),t(this,i)}},i=new WeakMap,(()=>{const m=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;r=[$()],e=[$(),di],Qr(o,null,r,{kind:"method",name:"autofill",static:!1,private:!1,access:{has:f=>"autofill"in f,get:f=>f.autofill},metadata:m},null,s),Qr(o,null,e,{kind:"method",name:"contentFrame",static:!1,private:!1,access:{has:f=>"contentFrame"in f,get:f=>f.contentFrame},metadata:m},null,s),m&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:m})})(),o})();/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var nr=function(n,s,r){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var e,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=s[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=s[Symbol.dispose],r&&(i=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");i&&(e=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:s,dispose:e,async:r})}else r&&n.stack.push({async:!0});return s},vn=function(n){return function(s){function r(a){s.error=s.hasError?new n(a,s.error,"An error was suppressed during disposal."):a,s.hasError=!0}var e,i=0;function o(){for(;e=s.stack.pop();)try{if(!e.async&&i===1)return i=0,s.stack.push(e),Promise.resolve().then(o);if(e.dispose){var a=e.dispose.call(e.value);if(e.async)return i|=2,Promise.resolve(a).then(o,function(d){return r(d),o()})}else i|=1}catch(d){r(d)}if(i===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return o()}}(typeof SuppressedError=="function"?SuppressedError:function(n,s,r){var e=new Error(r);return e.name="SuppressedError",e.error=n,e.suppressed=s,e}),ye,yt,We,Je,bt,vt,ue,Es,Cs,Gt,_s,Ss;const Mr=class Mr{constructor(s,r,e,i=!1){b(this,ue);b(this,ye);A(this,"name");b(this,yt);b(this,We);b(this,Je);b(this,bt,[]);b(this,vt,new ce);b(this,Gt,async s=>{const r={stack:[],error:void 0,hasError:!1};try{if(s.channel!==t(this,Je))return;const e=R(this,ue,_s).call(this,s.source);if(!e)return;const i=nr(r,Me.from(s.data,e),!1),o=nr(r,await i.evaluateHandle(([,,f])=>f),!1),a=nr(r,new ce,!1),d=[];for(const[f,l]of await o.getProperties()){if(a.use(l),l instanceof It){d[+f]=l,a.use(l);continue}d[+f]=l.jsonValue()}let m;try{m=await t(this,yt).call(this,...await Promise.all(d))}catch(f){try{f instanceof Error?await i.evaluate(([,l],u,w,g)=>{const S=new Error(w);S.name=u,g&&(S.stack=g),l(S)},f.name,f.message,f.stack):await i.evaluate(([,l],u)=>{l(u)},f)}catch(l){Q(l)}return}try{await i.evaluate(([f],l)=>{f(l)},m)}catch(f){Q(f)}}catch(e){r.error=e,r.hasError=!0}finally{vn(r)}});x(this,ye,s),this.name=r,x(this,yt,e),x(this,We,i),x(this,Je,`__puppeteer__${t(this,ye)._id}_page_exposeFunction_${this.name}`)}static async from(s,r,e,i=!1){var a;const o=new Mr(s,r,e,i);return await R(a=o,ue,Es).call(a),o}[Symbol.dispose](){this[Symbol.asyncDispose]().catch(Q)}async[Symbol.asyncDispose](){t(this,vt).dispose(),await Promise.all(t(this,bt).map(async([s,r])=>{const e=t(this,We)?s.isolatedRealm():s.mainRealm();try{await Promise.all([e.evaluate(i=>{delete globalThis[i]},this.name),...s.childFrames().map(i=>i.evaluate(o=>{delete globalThis[o]},this.name)),s.browsingContext.removePreloadScript(r)])}catch(i){Q(i)}}))}};ye=new WeakMap,yt=new WeakMap,We=new WeakMap,Je=new WeakMap,bt=new WeakMap,vt=new WeakMap,ue=new WeakSet,Es=async function(){const s=t(this,ue,Cs),r={type:"channel",value:{channel:t(this,Je),ownership:"root"}};t(this,vt).use(new z(s)).on(Gi.ChromiumBidi.Script.EventNames.Message,t(this,Gt));const i=cs(li(a=>{Object.assign(globalThis,{[PLACEHOLDER("name")]:function(...d){return new Promise((m,f)=>{a([m,f,d])})}})},{name:JSON.stringify(this.name)})),o=[t(this,ye)];for(const a of o)o.push(...a.childFrames());await Promise.all(o.map(async a=>{const d=t(this,We)?a.isolatedRealm():a.mainRealm();try{const[m]=await Promise.all([a.browsingContext.addPreloadScript(i,{arguments:[r],sandbox:d.sandbox}),d.realm.callFunction(i,!1,{arguments:[r]})]);t(this,bt).push([a,m])}catch(m){Q(m)}}))},Cs=function(){return t(this,ye).page().browser().connection},Gt=new WeakMap,_s=function(s){const r=R(this,ue,Ss).call(this,s.context);if(r)return r.realm(s.realm)},Ss=function(s){const r=[t(this,ye)];for(const e of r){if(e._id===s)return e;r.push(...e.childFrames())}};let ot=Mr;var En=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},Cn=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0};let _n=(()=>{var e,i,o,a,d,xs,f;let n=fi,s=[],r;return f=class extends n{constructor(w,g,S){super();b(this,d);b(this,e,En(this,s));b(this,i);b(this,o);b(this,a,!1);x(this,e,w),x(this,i,g),x(this,a,S);const y=w["goog:securityDetails"];S&&y&&x(this,o,new hi(y))}static from(w,g,S){var h;const y=new f(w,g,S);return R(h=y,d,xs).call(h),y}remoteAddress(){return{ip:"",port:-1}}url(){return t(this,e).url}status(){return t(this,e).status}statusText(){return t(this,e).statusText}headers(){const w={};for(const g of t(this,e).headers)g.value.type==="string"&&(w[g.name.toLowerCase()]=g.value.value);return w}request(){return t(this,i)}fromCache(){return t(this,e).fromCache}timing(){const w=t(this,i).timing();return{requestTime:w.requestTime,proxyStart:-1,proxyEnd:-1,dnsStart:w.dnsStart,dnsEnd:w.dnsEnd,connectStart:w.connectStart,connectEnd:w.connectEnd,sslStart:w.tlsStart,sslEnd:-1,workerStart:-1,workerReady:-1,workerFetchStart:-1,workerRespondWithSettled:-1,workerRouterEvaluationStart:-1,workerCacheLookupStart:-1,sendStart:w.requestStart,sendEnd:-1,pushStart:-1,pushEnd:-1,receiveHeadersStart:w.responseStart,receiveHeadersEnd:w.responseEnd}}frame(){return t(this,i).frame()}fromServiceWorker(){return!1}securityDetails(){if(!t(this,a))throw new M;return t(this,o)??null}content(){throw new M}},e=new WeakMap,i=new WeakMap,o=new WeakMap,a=new WeakMap,d=new WeakSet,xs=function(){var w,g;t(this,e).fromCache&&(t(this,i)._fromMemoryCache=!0,(w=t(this,i).frame())==null||w.page().trustedEmitter.emit("requestservedfromcache",t(this,i))),(g=t(this,i).frame())==null||g.page().trustedEmitter.emit("response",this)},(()=>{const w=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;r=[pi],Cn(f,null,r,{kind:"method",name:"remoteAddress",static:!1,private:!1,access:{has:g=>"remoteAddress"in g,get:g=>g.remoteAddress},metadata:w},null,s),w&&Object.defineProperty(f,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:w})})(),f})();var mr;const ks=new WeakMap;var Fe,Et,G,K,ee,Ds,wr,gr,yr,Ct,Xt;class Ps extends qr{constructor(r,e,i){super();b(this,ee);b(this,Fe);b(this,Et,null);A(this,"id");b(this,G);b(this,K);b(this,Ct,!1);b(this,Xt,async()=>{if(!t(this,G))return;const r=t(this,G).page()._credentials;r&&!t(this,Ct)?(x(this,Ct,!0),t(this,K).continueWithAuth({action:"provideCredentials",credentials:{type:"password",username:r.username,password:r.password}})):t(this,K).continueWithAuth({action:"cancel"})});ks.set(r,this),this.interception.enabled=r.isBlocked,x(this,K,r),x(this,G,e),x(this,Fe,i?t(i,Fe):[]),this.id=r.id}static from(r,e,i){var a;const o=new mr(r,e,i);return R(a=o,ee,Ds).call(a),o}get client(){return t(this,G).client}url(){return t(this,K).url}resourceType(){if(!t(this,G).page().browser().cdpSupported)throw new M;return(t(this,K).resourceType||"other").toLowerCase()}method(){return t(this,K).method}postData(){if(!t(this,G).page().browser().cdpSupported)throw new M;return t(this,K).postData}hasPostData(){if(!t(this,G).page().browser().cdpSupported)throw new M;return t(this,K).hasPostData}async fetchPostData(){throw new M}headers(){const r={};for(const e of t(this,K).headers)r[e.name.toLowerCase()]=e.value.value;return{...r,...t(this,ee,gr),...t(this,ee,yr)}}response(){return t(this,Et)}failure(){return t(this,K).error===void 0?null:{errorText:t(this,K).error}}isNavigationRequest(){return t(this,K).navigation!==void 0}initiator(){var r;return{...t(this,K).initiator,type:((r=t(this,K).initiator)==null?void 0:r.type)??"other"}}redirectChain(){return t(this,Fe).slice()}frame(){return t(this,G)}async continue(r,e){return await super.continue({headers:t(this,ee,wr)?this.headers():void 0,...r},e)}async _continue(r={}){const e=Yr(r.headers);return this.interception.handled=!0,await t(this,K).continueRequest({url:r.url,method:r.method,body:r.postData?{type:"base64",value:mi(r.postData)}:void 0,headers:e.length>0?e:void 0}).catch(i=>(this.interception.handled=!1,wi(i)))}async _abort(){return this.interception.handled=!0,await t(this,K).failRequest().catch(r=>{throw this.interception.handled=!1,r})}async _respond(r,e){this.interception.handled=!0;let i;r.body&&(i=qr.getResponse(r.body));const o=Yr(r.headers),a=o.some(m=>m.name==="content-length");r.contentType&&o.push({name:"content-type",value:{type:"string",value:r.contentType}}),i!=null&&i.contentLength&&!a&&o.push({name:"content-length",value:{type:"string",value:String(i.contentLength)}});const d=r.status||200;return await t(this,K).provideResponse({statusCode:d,headers:o.length>0?o:void 0,reasonPhrase:gi[d],body:i!=null&&i.base64?{type:"base64",value:i==null?void 0:i.base64}:void 0}).catch(m=>{throw this.interception.handled=!1,m})}timing(){return t(this,K).timing()}}Fe=new WeakMap,Et=new WeakMap,G=new WeakMap,K=new WeakMap,ee=new WeakSet,Ds=function(){t(this,K).on("redirect",r=>{const e=mr.from(r,t(this,G),this);t(this,Fe).push(this),r.once("success",()=>{t(this,G).page().trustedEmitter.emit("requestfinished",e)}),r.once("error",()=>{t(this,G).page().trustedEmitter.emit("requestfailed",e)}),e.finalizeInterceptions()}),t(this,K).once("success",r=>{x(this,Et,_n.from(r,this,t(this,G).page().browser().cdpSupported))}),t(this,K).on("authenticate",t(this,Xt)),t(this,G).page().trustedEmitter.emit("request",this),t(this,ee,wr)&&this.interception.handlers.push(async()=>{await this.continue({headers:this.headers()},0)})},wr=function(){return!!(Object.keys(t(this,ee,gr)).length||Object.keys(t(this,ee,yr)).length)},gr=function(){var r;return((r=t(this,G))==null?void 0:r.page()._extraHTTPHeaders)??{}},yr=function(){var r;return((r=t(this,G))==null?void 0:r.page()._userAgentHeaders)??{}},Ct=new WeakMap,Xt=new WeakMap;mr=Ps;function Yr(n){const s=[];for(const[r,e]of Object.entries(n??[]))if(!Object.is(e,void 0)){const i=Array.isArray(e)?e:[e];for(const o of i)s.push({name:r.toLowerCase(),value:{type:"string",value:String(o)}})}return s}/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */class Zr extends Error{}var tt,Os,js;class Ts{static serialize(s){switch(typeof s){case"symbol":case"function":throw new Zr(`Unable to serializable ${typeof s}`);case"object":return R(this,tt,js).call(this,s);case"undefined":return{type:"undefined"};case"number":return R(this,tt,Os).call(this,s);case"bigint":return{type:"bigint",value:s.toString()};case"string":return{type:"string",value:s};case"boolean":return{type:"boolean",value:s}}}}tt=new WeakSet,Os=function(s){let r;return Object.is(s,-0)?r="-0":Object.is(s,1/0)?r="Infinity":Object.is(s,-1/0)?r="-Infinity":Object.is(s,NaN)?r="NaN":r=s,{type:"number",value:r}},js=function(s){if(s===null)return{type:"null"};if(Array.isArray(s))return{type:"array",value:s.map(e=>this.serialize(e))};if(yi(s)){try{JSON.stringify(s)}catch(e){throw e instanceof TypeError&&e.message.startsWith("Converting circular structure to JSON")&&(e.message+=" Recursive objects are not allowed."),e}const r=[];for(const e in s)r.push([this.serialize(e),this.serialize(s[e])]);return{type:"object",value:r}}else{if(bi(s))return{type:"regexp",value:{pattern:s.source,flags:s.flags}};if(vi(s))return{type:"date",value:s.toISOString()}}throw new Zr("Custom object serialization not possible. Use plain objects instead.")},b(Ts,tt);/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */function Sn(n){if(n.exception.type!=="error")return Ft.deserialize(n.exception);const[s="",...r]=n.text.split(": "),e=r.join(": "),i=new Error(e);i.name=s;const o=[];if(n.stackTrace&&o.length<Error.stackTraceLimit)for(const a of n.stackTrace.callFrames.reverse()){if(At.isPuppeteerURL(a.url)&&a.url!==At.INTERNAL_URL){const d=At.parse(a.url);o.unshift(`    at ${a.functionName||d.functionName} (${d.functionName} at ${d.siteString}, <anonymous>:${a.lineNumber}:${a.columnNumber})`)}else o.push(`    at ${a.functionName||"<anonymous>"} (${a.url}:${a.lineNumber}:${a.columnNumber})`);if(o.length>=Error.stackTraceLimit)break}return i.stack=[n.text,...o].join(`
`),i}function Fs(n,s){return r=>{throw r instanceof Ei?r.message+=` at ${n}`:r instanceof Ci&&(r.message=`Navigation timeout of ${s} ms exceeded`),r}}var xn=function(n,s,r){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var e,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=s[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=s[Symbol.dispose],r&&(i=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");i&&(e=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:s,dispose:e,async:r})}else r&&n.stack.push({async:!0});return s},kn=function(n){return function(s){function r(a){s.error=s.hasError?new n(a,s.error,"An error was suppressed during disposal."):a,s.hasError=!0}var e,i=0;function o(){for(;e=s.stack.pop();)try{if(!e.async&&i===1)return i=0,s.stack.push(e),Promise.resolve().then(o);if(e.dispose){var a=e.dispose.call(e.value);if(e.async)return i|=2,Promise.resolve(a).then(o,function(d){return r(d),o()})}else i|=1}catch(d){r(d)}if(i===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return o()}}(typeof SuppressedError=="function"?SuppressedError:function(n,s,r){var e=new Error(r);return e.name="SuppressedError",e.error=n,e.suppressed=s,e}),_t,br;class Ns extends _i{constructor(r,e){super(e);b(this,_t);A(this,"realm");A(this,"internalPuppeteerUtil");this.realm=r}initialize(){this.realm.on("destroyed",({reason:r})=>{this.taskManager.terminateAll(new Error(r)),this.dispose()}),this.realm.on("updated",()=>{this.internalPuppeteerUtil=void 0,this.taskManager.rerunAll()})}get puppeteerUtil(){const r=Promise.resolve();return Si.inject(e=>{this.internalPuppeteerUtil&&this.internalPuppeteerUtil.then(i=>{i.dispose()}),this.internalPuppeteerUtil=r.then(()=>this.evaluateHandle(e))},!this.internalPuppeteerUtil),this.internalPuppeteerUtil}async evaluateHandle(r,...e){return await R(this,_t,br).call(this,!1,r,...e)}async evaluate(r,...e){return await R(this,_t,br).call(this,!0,r,...e)}createHandle(r){return(r.type==="node"||r.type==="window")&&this instanceof $e?It.from(r,this):Me.from(r,this)}async serializeAsync(r){return r instanceof Ir&&(r=await r.get(this)),this.serialize(r)}serialize(r){if(r instanceof Me||r instanceof It){if(r.realm!==this){if(!(r.realm instanceof $e)||!(this instanceof $e))throw new Error("Trying to evaluate JSHandle from different global types. Usually this means you're using a handle from a worker in a page or vice versa.");if(r.realm.environment!==this.environment)throw new Error("Trying to evaluate JSHandle from different frames. Usually this means you're using a handle from a page on a different page.")}if(r.disposed)throw new Error("JSHandle is disposed!");return r.remoteValue()}return Ts.serialize(r)}async destroyHandles(r){if(this.disposed)return;const e=r.map(({id:i})=>i).filter(i=>i!==void 0);e.length!==0&&await this.realm.disown(e).catch(i=>{Q(i)})}async adoptHandle(r){return await this.evaluateHandle(e=>e,r)}async transferHandle(r){if(r.realm===this)return r;const e=this.adoptHandle(r);return await r.dispose(),await e}}_t=new WeakSet,br=async function(r,e,...i){var l;const o=xi(((l=ki(e))==null?void 0:l.toString())??At.INTERNAL_URL);let a;const d=r?"none":"root",m=r?{}:{maxObjectDepth:0,maxDomDepth:0};if(us(e)){const u=Vr.test(e)?e:`${e}
${o}
`;a=this.realm.evaluate(u,!0,{resultOwnership:d,userActivation:!0,serializationOptions:m})}else{let u=cs(e);u=Vr.test(u)?u:`${u}
${o}
`,a=this.realm.callFunction(u,!0,{arguments:i.some(w=>w instanceof Ir)?await Promise.all(i.map(w=>this.serializeAsync(w))):i.map(w=>this.serialize(w)),resultOwnership:d,userActivation:!0,serializationOptions:m})}const f=await a;if("type"in f&&f.type==="exception")throw Sn(f.exceptionDetails);return r?Ft.deserialize(f.result):this.createHandle(f.result)};var Ge,Qt,Rs,Xe;const Yt=class Yt extends Ns{constructor(r,e){super(r,e.timeoutSettings);b(this,Qt);b(this,Ge);b(this,Xe,!1);x(this,Ge,e)}static from(r,e){var o;const i=new Yt(r,e);return R(o=i,Qt,Rs).call(o),i}get puppeteerUtil(){let r=Promise.resolve();return t(this,Xe)||(r=Promise.all([ot.from(this.environment,"__ariaQuerySelector",Br.queryOne,!!this.sandbox),ot.from(this.environment,"__ariaQuerySelectorAll",async(e,i)=>{const o=Br.queryAll(e,i);return await e.realm.evaluateHandle((...a)=>a,...await os.collect(o))},!!this.sandbox)]),x(this,Xe,!0)),r.then(()=>super.puppeteerUtil)}get sandbox(){return this.realm.sandbox}get environment(){return t(this,Ge)}async adoptBackendNode(r){const e={stack:[],error:void 0,hasError:!1};try{const{object:i}=await t(this,Ge).client.send("DOM.resolveNode",{backendNodeId:r,executionContextId:await this.realm.resolveExecutionContextId()});return await xn(e,It.from({handle:i.objectId,type:"node"},this),!1).evaluateHandle(a=>a)}catch(i){e.error=i,e.hasError=!0}finally{kn(e)}}};Ge=new WeakMap,Qt=new WeakSet,Rs=function(){Hr(Yt.prototype,this,"initialize").call(this),this.realm.on("updated",()=>{this.environment.clearDocumentHandle(),x(this,Xe,!1)})},Xe=new WeakMap;let $e=Yt;var St;const Ur=class Ur extends Ns{constructor(r,e){super(r,e.timeoutSettings);b(this,St);x(this,St,e)}static from(r,e){const i=new Ur(r,e);return i.initialize(),i}get environment(){return t(this,St)}async adoptBackendNode(){throw new Error("Cannot adopt DOM nodes into a worker.")}};St=new WeakMap;let vr=Ur;/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var xt,kt;const zr=class zr extends Pi{constructor(r,e){super(e.origin);b(this,xt);b(this,kt);x(this,xt,r),x(this,kt,vr.from(e,this))}static from(r,e){return new zr(r,e)}get frame(){return t(this,xt)}mainRealm(){return t(this,kt)}get client(){throw new M}};xt=new WeakMap,kt=new WeakMap;let Er=zr;/**
 * @license
 * Copyright 2023 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Pn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},Ee=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0},es=function(n,s,r){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:r?"".concat(r," ",s):s})};function Dn(n){switch(n){case"group":return"startGroup";case"groupCollapsed":return"startGroupCollapsed";case"groupEnd":return"endGroup";default:return n}}let Tn=(()=>{var u,w,g,As,Cr,Mt,p,Ut,zt,D;let n=Di,s=[],r,e,i,o,a,d,m,f,l;return D=class extends n{constructor(E,c){super();b(this,g);b(this,u,Pn(this,s));A(this,"browsingContext");b(this,w,new WeakMap);A(this,"realms");A(this,"_id");A(this,"client");A(this,"accessibility");b(this,p,new Map);x(this,u,E),this.browsingContext=c,this._id=c.id,this.client=new at(this),this.realms={default:$e.from(this.browsingContext.defaultRealm,this),internal:$e.from(this.browsingContext.createWindowRealm(`__puppeteer_internal_${Math.ceil(Math.random()*1e4)}`),this)},this.accessibility=new Ti(this.realms.default,this._id)}static from(E,c){var F;const k=new D(E,c);return R(F=k,g,As).call(F),k}get timeoutSettings(){return this.page()._timeoutSettings}mainRealm(){return this.realms.default}isolatedRealm(){return this.realms.internal}realm(E){for(const c of Object.values(this.realms))if(c.realm.id===E)return c}page(){let E=t(this,u);for(;E instanceof D;)E=t(E,u);return E}url(){return this.browsingContext.url}parentFrame(){return t(this,u)instanceof D?t(this,u):null}childFrames(){return[...this.browsingContext.children].map(E=>t(this,w).get(E))}async goto(E,c={}){const[k]=await Promise.all([this.waitForNavigation(c),this.browsingContext.navigate(E,"interactive").catch(F=>{if(!(ds(F)&&F.message.includes("net::ERR_HTTP_RESPONSE_CODE_FAILURE"))&&!F.message.includes("navigation canceled")&&!F.message.includes("Navigation was aborted by another navigation"))throw F})]).catch(Fs(E,c.timeout??this.timeoutSettings.navigationTimeout()));return k}async setContent(E,c={}){await Promise.all([this.setFrameContent(E),Ht(Rt([t(this,g,Ut).call(this,c),t(this,g,zt).call(this,c)]))])}async waitForNavigation(E={}){const{timeout:c=this.timeoutSettings.navigationTimeout(),signal:k}=E,F=this.childFrames().map(_=>{var N;return R(N=_,g,Mt).call(N)});return await Ht(Rt([Ni(ie(this.browsingContext,"navigation"),ie(this.browsingContext,"historyUpdated").pipe(rt(()=>({navigation:null})))).pipe(Kr()).pipe(ir(({navigation:_})=>_===null?me(null):t(this,g,Ut).call(this,E).pipe(Ri(()=>F.length===0?me(void 0):Rt(F)),xe(ie(_,"fragment"),ie(_,"failed"),ie(_,"aborted")),ir(()=>{if(_.request){let N=function(L){return _===null?me(null):L.response||L.error?me(_):L.redirect?N(L.redirect):ie(L,"success").pipe(xe(ie(L,"error")),xe(ie(L,"redirect"))).pipe(ir(()=>N(L)))};return N(_.request)}return me(_)})))),t(this,g,zt).call(this,E)]).pipe(rt(([_])=>{if(!_)return null;const N=_.request;if(!N)return null;const L=N.lastRedirect??N;return ks.get(L).response()}),xe(Lt(c),Ai(k),R(this,g,Mt).call(this).pipe(rt(()=>{throw new Tr("Frame detached.")})))))}waitForDevicePrompt(){throw new M}get detached(){return this.browsingContext.closed}async exposeFunction(E,c){if(t(this,p).has(E))throw new Error(`Failed to add page binding with name ${E}: globalThis['${E}'] already exists!`);const k=await ot.from(this,E,c);t(this,p).set(E,k)}async removeExposedFunction(E){const c=t(this,p).get(E);if(!c)throw new Error(`Failed to remove page binding with name ${E}: window['${E}'] does not exists!`);t(this,p).delete(E),await c[Symbol.asyncDispose]()}async createCDPSession(){if(!this.page().browser().cdpSupported)throw new M;return await this.page().browser().cdpConnection._createSession({targetId:this._id})}async setFiles(E,c){await this.browsingContext.setFiles(E.remoteValue(),c)}async locateNodes(E,c){return await this.browsingContext.locateNodes(c,[E.remoteValue()])}},u=new WeakMap,w=new WeakMap,g=new WeakSet,As=function(){for(const E of this.browsingContext.children)R(this,g,Cr).call(this,E);this.browsingContext.on("browsingcontext",({browsingContext:E})=>{R(this,g,Cr).call(this,E)}),this.browsingContext.on("closed",()=>{for(const E of at.sessions.values())E.frame===this&&E.onClose();this.page().trustedEmitter.emit("framedetached",this)}),this.browsingContext.on("request",({request:E})=>{const c=Ps.from(E,this);E.once("success",()=>{this.page().trustedEmitter.emit("requestfinished",c)}),E.once("error",()=>{this.page().trustedEmitter.emit("requestfailed",c)}),c.finalizeInterceptions()}),this.browsingContext.on("navigation",({navigation:E})=>{E.once("fragment",()=>{this.page().trustedEmitter.emit("framenavigated",this)})}),this.browsingContext.on("load",()=>{this.page().trustedEmitter.emit("load",void 0)}),this.browsingContext.on("DOMContentLoaded",()=>{this._hasStartedLoading=!0,this.page().trustedEmitter.emit("domcontentloaded",void 0),this.page().trustedEmitter.emit("framenavigated",this)}),this.browsingContext.on("userprompt",({userPrompt:E})=>{this.page().trustedEmitter.emit("dialog",pr.from(E))}),this.browsingContext.on("log",({entry:E})=>{if(this._id===E.source.context)if(On(E)){const c=E.args.map(F=>this.mainRealm().createHandle(F)),k=c.reduce((F,_)=>{const N=_ instanceof Me&&_.isPrimitiveValue?Ft.deserialize(_.remoteValue()):_.toString();return`${F} ${N}`},"").slice(1);this.page().trustedEmitter.emit("console",new Oi(Dn(E.method),k,c,Fn(E.stackTrace),this))}else if(jn(E)){const c=new Error(E.text??""),k=c.message.split(`
`).length,F=c.stack.split(`
`).splice(0,k),_=[];if(E.stackTrace){for(const N of E.stackTrace.callFrames)if(_.push(`    at ${N.functionName||"<anonymous>"} (${N.url}:${N.lineNumber+1}:${N.columnNumber+1})`),_.length>=Error.stackTraceLimit)break}c.stack=[...F,..._].join(`
`),this.page().trustedEmitter.emit("pageerror",c)}else Q(`Unhandled LogEntry with type "${E.type}", text "${E.text}" and level "${E.level}"`)}),this.browsingContext.on("worker",({realm:E})=>{const c=Er.from(this,E);E.on("destroyed",()=>{this.page().trustedEmitter.emit("workerdestroyed",c)}),this.page().trustedEmitter.emit("workercreated",c)})},Cr=function(E){const c=D.from(this,E);return t(this,w).set(E,c),this.page().trustedEmitter.emit("frameattached",c),E.on("closed",()=>{t(this,w).delete(E)}),c},Mt=function(){return ji(()=>this.detached?me(this):ie(this.page().trustedEmitter,"framedetached").pipe(Fi(E=>E===this)))},p=new WeakMap,Ut=function(){return a.value},zt=function(){return m.value},(()=>{const E=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;r=[ve],e=[ve],i=[ve],o=[ve],d=[ve],f=[ve],l=[ve],Ee(D,null,r,{kind:"method",name:"goto",static:!1,private:!1,access:{has:c=>"goto"in c,get:c=>c.goto},metadata:E},null,s),Ee(D,null,e,{kind:"method",name:"setContent",static:!1,private:!1,access:{has:c=>"setContent"in c,get:c=>c.setContent},metadata:E},null,s),Ee(D,null,i,{kind:"method",name:"waitForNavigation",static:!1,private:!1,access:{has:c=>"waitForNavigation"in c,get:c=>c.waitForNavigation},metadata:E},null,s),Ee(D,a={value:es(function(c={}){let{waitUntil:k="load"}=c;const{timeout:F=this.timeoutSettings.navigationTimeout()}=c;Array.isArray(k)||(k=[k]);const _=new Set;for(const N of k)switch(N){case"load":{_.add("load");break}case"domcontentloaded":{_.add("DOMContentLoaded");break}}return _.size===0?me(void 0):Rt([..._].map(N=>ie(this.browsingContext,N))).pipe(rt(()=>{}),Kr(),xe(Lt(F),R(this,g,Mt).call(this).pipe(rt(()=>{throw new Error("Frame detached.")}))))},"#waitForLoad$")},o,{kind:"method",name:"#waitForLoad$",static:!1,private:!0,access:{has:c=>Nt(g,c),get:c=>t(c,g,Ut)},metadata:E},null,s),Ee(D,m={value:es(function(c={}){let{waitUntil:k="load"}=c;Array.isArray(k)||(k=[k]);let F=1/0;for(const _ of k)switch(_){case"networkidle0":{F=Math.min(0,F);break}case"networkidle2":{F=Math.min(2,F);break}}return F===1/0?me(void 0):this.page().waitForNetworkIdle$({idleTime:500,timeout:c.timeout??this.timeoutSettings.timeout(),concurrency:F})},"#waitForNetworkIdle$")},d,{kind:"method",name:"#waitForNetworkIdle$",static:!1,private:!0,access:{has:c=>Nt(g,c),get:c=>t(c,g,zt)},metadata:E},null,s),Ee(D,null,f,{kind:"method",name:"setFiles",static:!1,private:!1,access:{has:c=>"setFiles"in c,get:c=>c.setFiles},metadata:E},null,s),Ee(D,null,l,{kind:"method",name:"locateNodes",static:!1,private:!1,access:{has:c=>"locateNodes"in c,get:c=>c.locateNodes},metadata:E},null,s),E&&Object.defineProperty(D,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:E})})(),D})();function On(n){return n.type==="console"}function jn(n){return n.type==="javascript"}function Fn(n){const s=[];if(n)for(const r of n.callFrames)s.push({url:r.url,lineNumber:r.lineNumber,columnNumber:r.columnNumber});return s}/**
 * @license
 * Copyright 2017 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Z;(function(n){n.None="none",n.Key="key",n.Pointer="pointer",n.Wheel="wheel"})(Z||(Z={}));var I;(function(n){n.Pause="pause",n.KeyDown="keyDown",n.KeyUp="keyUp",n.PointerUp="pointerUp",n.PointerDown="pointerDown",n.PointerMove="pointerMove",n.Scroll="scroll"})(I||(I={}));const it=n=>{switch(n){case"\r":case`
`:n="Enter";break}if([...n].length===1)return n;switch(n){case"Cancel":return"";case"Help":return"";case"Backspace":return"";case"Tab":return"";case"Clear":return"";case"Enter":return"";case"Shift":case"ShiftLeft":return"";case"Control":case"ControlLeft":return"";case"Alt":case"AltLeft":return"";case"Pause":return"";case"Escape":return"";case"PageUp":return"";case"PageDown":return"";case"End":return"";case"Home":return"";case"ArrowLeft":return"";case"ArrowUp":return"";case"ArrowRight":return"";case"ArrowDown":return"";case"Insert":return"";case"Delete":return"";case"NumpadEqual":return"";case"Numpad0":return"";case"Numpad1":return"";case"Numpad2":return"";case"Numpad3":return"";case"Numpad4":return"";case"Numpad5":return"";case"Numpad6":return"";case"Numpad7":return"";case"Numpad8":return"";case"Numpad9":return"";case"NumpadMultiply":return"";case"NumpadAdd":return"";case"NumpadSubtract":return"";case"NumpadDecimal":return"";case"NumpadDivide":return"";case"F1":return"";case"F2":return"";case"F3":return"";case"F4":return"";case"F5":return"";case"F6":return"";case"F7":return"";case"F8":return"";case"F9":return"";case"F10":return"";case"F11":return"";case"F12":return"";case"Meta":case"MetaLeft":return"";case"ShiftRight":return"";case"ControlRight":return"";case"AltRight":return"";case"MetaRight":return"";case"Digit0":return"0";case"Digit1":return"1";case"Digit2":return"2";case"Digit3":return"3";case"Digit4":return"4";case"Digit5":return"5";case"Digit6":return"6";case"Digit7":return"7";case"Digit8":return"8";case"Digit9":return"9";case"KeyA":return"a";case"KeyB":return"b";case"KeyC":return"c";case"KeyD":return"d";case"KeyE":return"e";case"KeyF":return"f";case"KeyG":return"g";case"KeyH":return"h";case"KeyI":return"i";case"KeyJ":return"j";case"KeyK":return"k";case"KeyL":return"l";case"KeyM":return"m";case"KeyN":return"n";case"KeyO":return"o";case"KeyP":return"p";case"KeyQ":return"q";case"KeyR":return"r";case"KeyS":return"s";case"KeyT":return"t";case"KeyU":return"u";case"KeyV":return"v";case"KeyW":return"w";case"KeyX":return"x";case"KeyY":return"y";case"KeyZ":return"z";case"Semicolon":return";";case"Equal":return"=";case"Comma":return",";case"Minus":return"-";case"Period":return".";case"Slash":return"/";case"Backquote":return"`";case"BracketLeft":return"[";case"Backslash":return"\\";case"BracketRight":return"]";case"Quote":return'"';default:throw new Error(`Unknown key: "${n}"`)}};var he;class Nn extends $i{constructor(r){super();b(this,he);x(this,he,r)}async down(r,e){await t(this,he).mainFrame().browsingContext.performActions([{type:Z.Key,id:"__puppeteer_keyboard",actions:[{type:I.KeyDown,value:it(r)}]}])}async up(r){await t(this,he).mainFrame().browsingContext.performActions([{type:Z.Key,id:"__puppeteer_keyboard",actions:[{type:I.KeyUp,value:it(r)}]}])}async press(r,e={}){const{delay:i=0}=e,o=[{type:I.KeyDown,value:it(r)}];i>0&&o.push({type:I.Pause,duration:i}),o.push({type:I.KeyUp,value:it(r)}),await t(this,he).mainFrame().browsingContext.performActions([{type:Z.Key,id:"__puppeteer_keyboard",actions:o}])}async type(r,e={}){const{delay:i=0}=e,o=[...r].map(it),a=[];if(i<=0)for(const d of o)a.push({type:I.KeyDown,value:d},{type:I.KeyUp,value:d});else for(const d of o)a.push({type:I.KeyDown,value:d},{type:I.Pause,duration:i},{type:I.KeyUp,value:d});await t(this,he).mainFrame().browsingContext.performActions([{type:Z.Key,id:"__puppeteer_keyboard",actions:a}])}async sendCharacter(r){if([...r].length>1)throw new Error("Cannot send more than 1 character.");await(await t(this,he).focusedFrame()).isolatedRealm().evaluate(async i=>{document.execCommand("insertText",!1,i)},r)}}he=new WeakMap;const ar=n=>{switch(n){case we.Left:return 0;case we.Middle:return 1;case we.Right:return 2;case we.Back:return 3;case we.Forward:return 4}};var oe,Ne;class Rn extends Mi{constructor(r){super();b(this,oe);b(this,Ne,{x:0,y:0});x(this,oe,r)}async reset(){x(this,Ne,{x:0,y:0}),await t(this,oe).mainFrame().browsingContext.releaseActions()}async move(r,e,i={}){const o=t(this,Ne),a={x:Math.round(r),y:Math.round(e)},d=[],m=i.steps??0;for(let f=0;f<m;++f)d.push({type:I.PointerMove,x:o.x+(a.x-o.x)*(f/m),y:o.y+(a.y-o.y)*(f/m),origin:i.origin});d.push({type:I.PointerMove,...a,origin:i.origin}),x(this,Ne,a),await t(this,oe).mainFrame().browsingContext.performActions([{type:Z.Pointer,id:"__puppeteer_mouse",actions:d}])}async down(r={}){await t(this,oe).mainFrame().browsingContext.performActions([{type:Z.Pointer,id:"__puppeteer_mouse",actions:[{type:I.PointerDown,button:ar(r.button??we.Left)}]}])}async up(r={}){await t(this,oe).mainFrame().browsingContext.performActions([{type:Z.Pointer,id:"__puppeteer_mouse",actions:[{type:I.PointerUp,button:ar(r.button??we.Left)}]}])}async click(r,e,i={}){const o=[{type:I.PointerMove,x:Math.round(r),y:Math.round(e),origin:i.origin}],a={type:I.PointerDown,button:ar(i.button??we.Left)},d={type:I.PointerUp,button:a.button};for(let m=1;m<(i.count??1);++m)o.push(a,d);o.push(a),i.delay&&o.push({type:I.Pause,duration:i.delay}),o.push(d),await t(this,oe).mainFrame().browsingContext.performActions([{type:Z.Pointer,id:"__puppeteer_mouse",actions:o}])}async wheel(r={}){await t(this,oe).mainFrame().browsingContext.performActions([{type:Z.Wheel,id:"__puppeteer_wheel",actions:[{type:I.Scroll,...t(this,Ne)??{x:0,y:0},deltaX:r.deltaX??0,deltaY:r.deltaY??0}]}])}drag(){throw new M}dragOver(){throw new M}dragEnter(){throw new M}drop(){throw new M}dragAndDrop(){throw new M}}oe=new WeakMap,Ne=new WeakMap;var Pt,Dt,Tt,Re,Ae,Ot,Qe;class An{constructor(s,r,e,i,o,a){b(this,Pt,!1);b(this,Dt);b(this,Tt);b(this,Re);b(this,Ae);b(this,Ot);b(this,Qe);x(this,Ae,s),x(this,Ot,r),x(this,Dt,Math.round(i)),x(this,Tt,Math.round(o)),x(this,Qe,a),x(this,Re,`__puppeteer_finger_${e}`)}async start(s={}){if(t(this,Pt))throw new zi("Touch has already started");await t(this,Ae).mainFrame().browsingContext.performActions([{type:Z.Pointer,id:t(this,Re),parameters:{pointerType:"touch"},actions:[{type:I.PointerMove,x:t(this,Dt),y:t(this,Tt),origin:s.origin},{...t(this,Qe),type:I.PointerDown,button:0}]}]),x(this,Pt,!0)}move(s,r){const e=Math.round(s),i=Math.round(r);return t(this,Ae).mainFrame().browsingContext.performActions([{type:Z.Pointer,id:t(this,Re),parameters:{pointerType:"touch"},actions:[{...t(this,Qe),type:I.PointerMove,x:e,y:i}]}])}async end(){await t(this,Ae).mainFrame().browsingContext.performActions([{type:Z.Pointer,id:t(this,Re),parameters:{pointerType:"touch"},actions:[{type:I.PointerUp,button:0}]}]),t(this,Ot).removeHandle(this)}}Pt=new WeakMap,Dt=new WeakMap,Tt=new WeakMap,Re=new WeakMap,Ae=new WeakMap,Ot=new WeakMap,Qe=new WeakMap;var jt;class $n extends Ui{constructor(r){super();b(this,jt);x(this,jt,r)}async touchStart(r,e,i={}){const o=this.idGenerator(),a={width:.5*2,height:.5*2,pressure:.5,altitudeAngle:Math.PI/2},d=new An(t(this,jt),this,o,r,e,a);return await d.start(i),this.touches.push(d),d}}jt=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Mn=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0},ts=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},rs=function(n,s,r){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var e,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=s[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=s[Symbol.dispose],r&&(i=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");i&&(e=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:s,dispose:e,async:r})}else r&&n.stack.push({async:!0});return s},ss=function(n){return function(s){function r(a){s.error=s.hasError?new n(a,s.error,"An error was suppressed during disposal."):a,s.hasError=!0}var e,i=0;function o(){for(;e=s.stack.pop();)try{if(!e.async&&i===1)return i=0,s.stack.push(e),Promise.resolve().then(o);if(e.dispose){var a=e.dispose.call(e.value);if(e.async)return i|=2,Promise.resolve(a).then(o,function(d){return r(d),o()})}else i|=1}catch(d){r(d)}if(i===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return o()}}(typeof SuppressedError=="function"?SuppressedError:function(n,s,r){var e=new Error(r);return e.name="SuppressedError",e.error=n,e.suppressed=s,e});let Bt=(()=>{var i,o,a,d,m,f,l,u,$s,g,S,y,h,p,nt,_r,Sr,O;let n=Vi,s,r=[],e=[];return O=class extends n{constructor(c,k){super();b(this,u);b(this,i,ts(this,r,new z));b(this,o,ts(this,e));b(this,a);b(this,d,null);b(this,m,new Set);A(this,"keyboard");A(this,"mouse");A(this,"touchscreen");A(this,"tracing");A(this,"coverage");b(this,f);b(this,l);A(this,"_userAgentHeaders",{});b(this,g);b(this,S);b(this,y);A(this,"_extraHTTPHeaders",{});b(this,h);A(this,"_credentials",null);b(this,p);x(this,o,c),x(this,a,Tn.from(this,k)),x(this,f,new Li(t(this,a).client)),this.tracing=new Hi(t(this,a).client),this.coverage=new qi(t(this,a).client),this.keyboard=new Nn(this),this.mouse=new Rn(this),this.touchscreen=new $n(this)}static from(c,k){var _;const F=new O(c,k);return R(_=F,u,$s).call(_),F}get trustedEmitter(){return t(this,i)}set trustedEmitter(c){x(this,i,c)}_client(){return t(this,a).client}async setUserAgent(c,k){if(!t(this,o).browser().cdpSupported&&k)throw new M("Current Browser does not support `userAgentMetadata`");if(t(this,o).browser().cdpSupported&&k)return await this._client().send("Network.setUserAgentOverride",{userAgent:c,userAgentMetadata:k});const F=c!=="";c=c??await t(this,o).browser().userAgent(),this._userAgentHeaders=F?{"User-Agent":c}:{},x(this,g,await R(this,u,nt).call(this,["beforeRequestSent"],t(this,g),F));const _=W=>{Object.defineProperty(navigator,"userAgent",{value:W,configurable:!0})},N=[t(this,a)];for(const W of N)N.push(...W.childFrames());t(this,S)&&await this.removeScriptToEvaluateOnNewDocument(t(this,S));const[L]=await Promise.all([F?this.evaluateOnNewDocument(_,c):void 0,...N.map(W=>W.evaluate(_,c))]);x(this,S,L==null?void 0:L.identifier)}async setBypassCSP(c){await this._client().send("Page.setBypassCSP",{enabled:c})}async queryObjects(c){Y(!c.disposed,"Prototype JSHandle is disposed!"),Y(c.id,"Prototype JSHandle must not be referencing primitive value");const k=await t(this,a).client.send("Runtime.queryObjects",{prototypeObjectId:c.id});return t(this,a).mainRealm().createHandle({type:"array",handle:k.objects.objectId})}browser(){return this.browserContext().browser()}browserContext(){return t(this,o)}mainFrame(){return t(this,a)}async focusedFrame(){const c={stack:[],error:void 0,hasError:!1};try{const F=rs(c,await this.mainFrame().isolatedRealm().evaluateHandle(()=>{let N=window;for(;(N.document.activeElement instanceof N.HTMLIFrameElement||N.document.activeElement instanceof N.HTMLFrameElement)&&N.document.activeElement.contentWindow!==null;)N=N.document.activeElement.contentWindow;return N}),!1).remoteValue();Y(F.type==="window");const _=this.frames().find(N=>N._id===F.value.context);return Y(_),_}catch(k){c.error=k,c.hasError=!0}finally{ss(c)}}frames(){const c=[t(this,a)];for(const k of c)c.push(...k.childFrames());return c}isClosed(){return t(this,a).detached}async close(c){const k={stack:[],error:void 0,hasError:!1};try{const F=rs(k,await t(this,o).waitForScreenshotOperations(),!1);try{await t(this,a).browsingContext.close(c==null?void 0:c.runBeforeUnload)}catch{return}}catch(F){k.error=F,k.hasError=!0}finally{ss(k)}}async reload(c={}){const[k]=await Promise.all([t(this,a).waitForNavigation(c),t(this,a).browsingContext.reload()]).catch(Fs(this.url(),c.timeout??this._timeoutSettings.navigationTimeout()));return k}setDefaultNavigationTimeout(c){this._timeoutSettings.setDefaultNavigationTimeout(c)}setDefaultTimeout(c){this._timeoutSettings.setDefaultTimeout(c)}getDefaultTimeout(){return this._timeoutSettings.timeout()}getDefaultNavigationTimeout(){return this._timeoutSettings.navigationTimeout()}isJavaScriptEnabled(){return t(this,f).javascriptEnabled}async setGeolocation(c){return await t(this,f).setGeolocation(c)}async setJavaScriptEnabled(c){return await t(this,f).setJavaScriptEnabled(c)}async emulateMediaType(c){return await t(this,f).emulateMediaType(c)}async emulateCPUThrottling(c){return await t(this,f).emulateCPUThrottling(c)}async emulateMediaFeatures(c){return await t(this,f).emulateMediaFeatures(c)}async emulateTimezone(c){return await t(this,f).emulateTimezone(c)}async emulateIdleState(c){return await t(this,f).emulateIdleState(c)}async emulateVisionDeficiency(c){return await t(this,f).emulateVisionDeficiency(c)}async setViewport(c){if(!this.browser().cdpSupported){await t(this,a).browsingContext.setViewport({viewport:c!=null&&c.width&&(c!=null&&c.height)?{width:c.width,height:c.height}:null,devicePixelRatio:c!=null&&c.deviceScaleFactor?c.deviceScaleFactor:null}),x(this,d,c);return}const k=await t(this,f).emulateViewport(c);x(this,d,c),k&&await this.reload()}viewport(){return t(this,d)}async pdf(c={}){const{timeout:k=this._timeoutSettings.timeout(),path:F=void 0}=c,{printBackground:_,margin:N,landscape:L,width:W,height:re,pageRanges:te,scale:q,preferCSSPageSize:Xs}=Ii(c,"cm"),Qs=te?te.split(", "):[];await Ht(Wr(this.mainFrame().isolatedRealm().evaluate(()=>document.fonts.ready)).pipe(xe(Lt(k))));const Ys=await Ht(Wr(t(this,a).browsingContext.print({background:_,margin:N,orientation:L?"landscape":"portrait",page:{width:W,height:re},pageRanges:Qs,scale:q,shrinkToFit:!Xs})).pipe(xe(Lt(k)))),H=Bi(Ys,!0);return await this._maybeWriteTypedArrayToFile(F,H),H}async createPDFStream(c){const k=await this.pdf(c);return new ReadableStream({start(F){F.enqueue(k),F.close()}})}async _screenshot(c){const{clip:k,type:F,captureBeyondViewport:_,quality:N}=c;if(c.omitBackground!==void 0&&c.omitBackground)throw new M("BiDi does not support 'omitBackground'.");if(c.optimizeForSpeed!==void 0&&c.optimizeForSpeed)throw new M("BiDi does not support 'optimizeForSpeed'.");if(c.fromSurface!==void 0&&!c.fromSurface)throw new M("BiDi does not support 'fromSurface'.");if(k!==void 0&&k.scale!==void 0&&k.scale!==1)throw new M("BiDi does not support 'scale' in 'clip'.");let L;if(k)if(_)L=k;else{const[re,te]=await this.evaluate(()=>{if(!window.visualViewport)throw new Error("window.visualViewport is not supported.");return[window.visualViewport.pageLeft,window.visualViewport.pageTop]});L={...k,x:k.x-re,y:k.y-te}}return await t(this,a).browsingContext.captureScreenshot({origin:_?"document":"viewport",format:{type:`image/${F}`,...N!==void 0?{quality:N/100}:{}},...L?{clip:{type:"box",...L}}:{}})}async createCDPSession(){return await t(this,a).createCDPSession()}async bringToFront(){await t(this,a).browsingContext.activate()}async evaluateOnNewDocument(c,...k){const F=Un(c,...k);return{identifier:await t(this,a).browsingContext.addPreloadScript(F)}}async removeScriptToEvaluateOnNewDocument(c){await t(this,a).browsingContext.removePreloadScript(c)}async exposeFunction(c,k){return await this.mainFrame().exposeFunction(c,"default"in k?k.default:k)}isDragInterceptionEnabled(){return!1}async setCacheEnabled(c){if(!t(this,o).browser().cdpSupported){await t(this,a).browsingContext.setCacheBehavior(c?"default":"bypass");return}await this._client().send("Network.setCacheDisabled",{cacheDisabled:!c})}async cookies(...c){const k=(c.length?c:[this.url()]).map(_=>new URL(_));return(await t(this,a).browsingContext.getCookies()).map(_=>Ms(_)).filter(_=>k.some(N=>Hn(_,N)))}isServiceWorkerBypassed(){throw new M}target(){throw new M}waitForFileChooser(){throw new M}workers(){return[...t(this,m)]}async setRequestInterception(c){x(this,y,await R(this,u,nt).call(this,["beforeRequestSent"],t(this,y),c))}async setExtraHTTPHeaders(c){const k={};for(const[F,_]of Object.entries(c))Y(us(_),`Expected value of header "${F}" to be String, but "${typeof _}" is found.`),k[F.toLowerCase()]=_;this._extraHTTPHeaders=k,x(this,h,await R(this,u,nt).call(this,["beforeRequestSent"],t(this,h),!!Object.keys(this._extraHTTPHeaders).length))}async authenticate(c){x(this,p,await R(this,u,nt).call(this,["authRequired"],t(this,p),!!c)),this._credentials=c}setDragInterception(){throw new M}setBypassServiceWorker(){throw new M}async setOfflineMode(c){if(!t(this,o).browser().cdpSupported)throw new M;return t(this,l)||x(this,l,{offline:!1,upload:-1,download:-1,latency:0}),t(this,l).offline=c,await R(this,u,_r).call(this)}async emulateNetworkConditions(c){if(!t(this,o).browser().cdpSupported)throw new M;return t(this,l)||x(this,l,{offline:!1,upload:-1,download:-1,latency:0}),t(this,l).upload=c?c.upload:-1,t(this,l).download=c?c.download:-1,t(this,l).latency=c?c.latency:0,await R(this,u,_r).call(this)}async setCookie(...c){const k=this.url(),F=k.startsWith("http");for(const _ of c){let N=_.url||"";!N&&F&&(N=k),Y(N!=="about:blank",`Blank page can not have cookie "${_.name}"`),Y(!String.prototype.startsWith.call(N||"","data:"),`Data URL page can not have cookie "${_.name}"`),Y(_.partitionKey===void 0||typeof _.partitionKey=="string","BiDi only allows domain partition keys");const L=URL.canParse(N)?new URL(N):void 0,W=_.domain??(L==null?void 0:L.hostname);Y(W!==void 0,"At least one of the url and domain needs to be specified");const re={domain:W,name:_.name,value:{type:"string",value:_.value},..._.path!==void 0?{path:_.path}:{},..._.httpOnly!==void 0?{httpOnly:_.httpOnly}:{},..._.secure!==void 0?{secure:_.secure}:{},..._.sameSite!==void 0?{sameSite:zs(_.sameSite)}:{},expiry:Ls(_.expires),...Us(_,"sameParty","sourceScheme","priority","url")};_.partitionKey!==void 0?await this.browserContext().userContext.setCookie(re,_.partitionKey):await t(this,a).browsingContext.setCookie(re)}}async deleteCookie(...c){await Promise.all(c.map(async k=>{const F=k.url??this.url(),_=URL.canParse(F)?new URL(F):void 0,N=k.domain??(_==null?void 0:_.hostname);Y(N!==void 0,"At least one of the url and domain needs to be specified");const L={domain:N,name:k.name,...k.path!==void 0?{path:k.path}:{}};await t(this,a).browsingContext.deleteCookie(L)}))}async removeExposedFunction(c){await t(this,a).removeExposedFunction(c)}metrics(){throw new M}async goBack(c={}){return await R(this,u,Sr).call(this,-1,c)}async goForward(c={}){return await R(this,u,Sr).call(this,1,c)}waitForDevicePrompt(){throw new M}},i=new WeakMap,o=new WeakMap,a=new WeakMap,d=new WeakMap,m=new WeakMap,f=new WeakMap,l=new WeakMap,u=new WeakSet,$s=function(){t(this,a).browsingContext.on("closed",()=>{this.trustedEmitter.emit("close",void 0),this.trustedEmitter.removeAllListeners()}),this.trustedEmitter.on("workercreated",c=>{t(this,m).add(c)}),this.trustedEmitter.on("workerdestroyed",c=>{t(this,m).delete(c)})},g=new WeakMap,S=new WeakMap,y=new WeakMap,h=new WeakMap,p=new WeakMap,nt=async function(c,k,F){if(F&&!k)return await t(this,a).browsingContext.addIntercept({phases:c});if(!F&&k){await t(this,a).browsingContext.userContext.browser.removeIntercept(k);return}return k},_r=async function(){t(this,l)&&await this._client().send("Network.emulateNetworkConditions",{offline:t(this,l).offline,latency:t(this,l).latency,uploadThroughput:t(this,l).upload,downloadThroughput:t(this,l).download})},Sr=async function(c,k){const F=new AbortController;try{const[_]=await Promise.all([this.waitForNavigation({...k,signal:F.signal}),t(this,a).browsingContext.traverseHistory(c)]);return _}catch(_){if(F.abort(),ds(_)&&_.message.includes("no such history entry"))return null;throw _}},(()=>{const c=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;s=[Zt()],Mn(O,null,s,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:k=>"trustedEmitter"in k,get:k=>k.trustedEmitter,set:(k,F)=>{k.trustedEmitter=F}},metadata:c},r,e),c&&Object.defineProperty(O,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:c})})(),O})();function Un(n,...s){return`() => {${Ki(n,...s)}}`}function zn(n,s){const r=n.domain.toLowerCase(),e=s.hostname.toLowerCase();return r===e?!0:r.startsWith(".")&&e.endsWith(r)}function Ln(n,s){const r=s.pathname,e=n.path;return!!(r===e||r.startsWith(e)&&(e.endsWith("/")||r[e.length]==="/"))}function Hn(n,s){const r=new URL(s);return Y(n!==void 0),zn(n,r)?Ln(n,r):!1}function Ms(n,s=!1){const r=n[Vt+"partitionKey"];function e(){return typeof r=="string"?{partitionKey:r}:typeof r=="object"&&r!==null?s?{partitionKey:{sourceOrigin:r.topLevelSite,hasCrossSiteAncestor:r.hasCrossSiteAncestor??!1}}:{partitionKey:r.topLevelSite}:{}}return{name:n.name,value:n.value.value,domain:n.domain,path:n.path,size:n.size,httpOnly:n.httpOnly,secure:n.secure,sameSite:In(n.sameSite),expires:n.expiry??-1,session:n.expiry===void 0||n.expiry<=0,...qn(n,"sameParty","sourceScheme","partitionKeyOpaque","priority"),...e()}}const Vt="goog:";function qn(n,...s){const r={};for(const e of s)n[Vt+e]!==void 0&&(r[e]=n[Vt+e]);return r}function Us(n,...s){const r={};for(const e of s)n[e]!==void 0&&(r[Vt+e]=n[e]);return r}function In(n){return n==="strict"?"Strict":n==="lax"?"Lax":"None"}function zs(n){return n==="Strict"?"strict":n==="Lax"?"lax":"none"}function Ls(n){return[void 0,-1].includes(n)?void 0:n}function Bn(n){if(n===void 0||typeof n=="string")return n;if(n.hasCrossSiteAncestor)throw new M("WebDriver BiDi does not support `hasCrossSiteAncestor` yet.");return n.sourceOrigin}var Ye;class Vn extends er{constructor(r){super();b(this,Ye);x(this,Ye,r)}asPage(){throw new M}url(){return""}createCDPSession(){throw new M}type(){return tr.BROWSER}browser(){return t(this,Ye)}browserContext(){return t(this,Ye).defaultBrowserContext()}opener(){throw new M}}Ye=new WeakMap;var fe;class Kn extends er{constructor(r){super();b(this,fe);x(this,fe,r)}async page(){return t(this,fe)}async asPage(){return Bt.from(this.browserContext(),t(this,fe).mainFrame().browsingContext)}url(){return t(this,fe).url()}createCDPSession(){return t(this,fe).createCDPSession()}type(){return tr.PAGE}browser(){return this.browserContext().browser()}browserContext(){return t(this,fe).browserContext()}opener(){throw new M}}fe=new WeakMap;var pe,Ze;class Wn extends er{constructor(r){super();b(this,pe);b(this,Ze);x(this,pe,r)}async page(){return t(this,Ze)===void 0&&x(this,Ze,Bt.from(this.browserContext(),t(this,pe).browsingContext)),t(this,Ze)}async asPage(){return Bt.from(this.browserContext(),t(this,pe).browsingContext)}url(){return t(this,pe).url()}createCDPSession(){return t(this,pe).createCDPSession()}type(){return tr.PAGE}browser(){return this.browserContext().browser()}browserContext(){return t(this,pe).page().browserContext()}opener(){throw new M}}pe=new WeakMap,Ze=new WeakMap;var et;class Jn extends er{constructor(r){super();b(this,et);x(this,et,r)}async page(){throw new M}async asPage(){throw new M}url(){return t(this,et).url()}createCDPSession(){throw new M}type(){return tr.OTHER}browser(){return this.browserContext().browser()}browserContext(){return t(this,et).frame.page().browserContext()}opener(){throw new M}}et=new WeakMap;/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Gn=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0},is=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},Xn=function(n,s,r){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var e,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=s[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=s[Symbol.dispose],r&&(i=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");i&&(e=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:s,dispose:e,async:r})}else r&&n.stack.push({async:!0});return s},Qn=function(n){return function(s){function r(a){s.error=s.hasError?new n(a,s.error,"An error was suppressed during disposal."):a,s.hasError=!0}var e,i=0;function o(){for(;e=s.stack.pop();)try{if(!e.async&&i===1)return i=0,s.stack.push(e),Promise.resolve().then(o);if(e.dispose){var a=e.dispose.call(e.value);if(e.async)return i|=2,Promise.resolve(a).then(o,function(d){return r(d),o()})}else i|=1}catch(d){r(d)}if(i===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return o()}}(typeof SuppressedError=="function"?SuppressedError:function(n,s,r){var e=new Error(r);return e.name="SuppressedError",e.error=n,e.suppressed=s,e});let Yn=(()=>{var i,o,a,d,m,f,l,Hs,xr,g;let n=Wi,s,r=[],e=[];return g=class extends n{constructor(h,p,T){super();b(this,l);b(this,i,is(this,r,new z));b(this,o,is(this,e));b(this,a);A(this,"userContext");b(this,d,new WeakMap);b(this,m,new Map);b(this,f,[]);x(this,o,h),this.userContext=p,x(this,a,T.defaultViewport)}static from(h,p,T){var D;const P=new g(h,p,T);return R(D=P,l,Hs).call(D),P}get trustedEmitter(){return t(this,i)}set trustedEmitter(h){x(this,i,h)}targets(){return[...t(this,m).values()].flatMap(([h,p])=>[h,...p.values()])}async newPage(){const h={stack:[],error:void 0,hasError:!1};try{const p=Xn(h,await this.waitForScreenshotOperations(),!1),T=await this.userContext.createBrowsingContext("tab"),P=t(this,d).get(T);if(!P)throw new Error("Page is not found");if(t(this,a))try{await P.setViewport(t(this,a))}catch{}return P}catch(p){h.error=p,h.hasError=!0}finally{Qn(h)}}async close(){Y(this.userContext.id!==qt.DEFAULT,"Default BrowserContext cannot be closed!");try{await this.userContext.remove()}catch(h){Q(h)}t(this,m).clear()}browser(){return t(this,o)}async pages(){return[...this.userContext.browsingContexts].map(h=>t(this,d).get(h))}async overridePermissions(h,p){const T=new Set(p.map(P=>{if(!Jr.get(P))throw new Error("Unknown permission: "+P);return P}));await Promise.all(Array.from(Jr.keys()).map(P=>{const D=this.userContext.setPermissions(h,{name:P},T.has(P)?"granted":"denied");return t(this,f).push({origin:h,permission:P}),T.has(P)?D:D.catch(Q)}))}async clearPermissionOverrides(){const h=t(this,f).map(({permission:p,origin:T})=>this.userContext.setPermissions(T,{name:p},"prompt").catch(Q));x(this,f,[]),await Promise.all(h)}get id(){if(this.userContext.id!==qt.DEFAULT)return this.userContext.id}async cookies(){return(await this.userContext.getCookies()).map(p=>Ms(p,!0))}async setCookie(...h){await Promise.all(h.map(async p=>{const T={domain:p.domain,name:p.name,value:{type:"string",value:p.value},...p.path!==void 0?{path:p.path}:{},...p.httpOnly!==void 0?{httpOnly:p.httpOnly}:{},...p.secure!==void 0?{secure:p.secure}:{},...p.sameSite!==void 0?{sameSite:zs(p.sameSite)}:{},expiry:Ls(p.expires),...Us(p,"sameParty","sourceScheme","priority","url")};return await this.userContext.setCookie(T,Bn(p.partitionKey))}))}},i=new WeakMap,o=new WeakMap,a=new WeakMap,d=new WeakMap,m=new WeakMap,f=new WeakMap,l=new WeakSet,Hs=function(){for(const h of this.userContext.browsingContexts)R(this,l,xr).call(this,h);this.userContext.on("browsingcontext",({browsingContext:h})=>{const p=R(this,l,xr).call(this,h);if(h.originalOpener)for(const T of this.userContext.browsingContexts)T.id===h.originalOpener&&t(this,d).get(T).trustedEmitter.emit("popup",p)}),this.userContext.on("closed",()=>{this.trustedEmitter.removeAllListeners()})},xr=function(h){const p=Bt.from(this,h);t(this,d).set(h,p),p.trustedEmitter.on("close",()=>{t(this,d).delete(h)});const T=new Kn(p),P=new Map;return t(this,m).set(p,[T,P]),p.trustedEmitter.on("frameattached",D=>{const O=D,j=new Wn(O);P.set(O,j),this.trustedEmitter.emit("targetcreated",j)}),p.trustedEmitter.on("framenavigated",D=>{const O=D,j=P.get(O);j===void 0?this.trustedEmitter.emit("targetchanged",T):this.trustedEmitter.emit("targetchanged",j)}),p.trustedEmitter.on("framedetached",D=>{const O=D,j=P.get(O);j!==void 0&&(P.delete(O),this.trustedEmitter.emit("targetdestroyed",j))}),p.trustedEmitter.on("workercreated",D=>{const O=D,j=new Jn(O);P.set(O,j),this.trustedEmitter.emit("targetcreated",j)}),p.trustedEmitter.on("workerdestroyed",D=>{const O=D,j=P.get(O);j!==void 0&&(P.delete(D),this.trustedEmitter.emit("targetdestroyed",j))}),p.trustedEmitter.on("close",()=>{t(this,m).delete(p),this.trustedEmitter.emit("targetdestroyed",T)}),this.trustedEmitter.emit("targetcreated",T),p},(()=>{const h=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;s=[Zt()],Gn(g,null,s,{kind:"accessor",name:"trustedEmitter",static:!1,private:!1,access:{has:p=>"trustedEmitter"in p,get:p=>p.trustedEmitter,set:(p,T)=>{p.trustedEmitter=T}},metadata:h},r,e),h&&Object.defineProperty(g,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:h})})(),g})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var Zn=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},He=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0},ea=function(n,s,r){if(s!=null){if(typeof s!="object"&&typeof s!="function")throw new TypeError("Object expected.");var e,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");e=s[Symbol.asyncDispose]}if(e===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");e=s[Symbol.dispose],r&&(i=e)}if(typeof e!="function")throw new TypeError("Object not disposable.");i&&(e=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),n.stack.push({value:s,dispose:e,async:r})}else r&&n.stack.push({async:!0});return s},ta=function(n){return function(s){function r(a){s.error=s.hasError?new n(a,s.error,"An error was suppressed during disposal."):a,s.hasError=!0}var e,i=0;function o(){for(;e=s.stack.pop();)try{if(!e.async&&i===1)return i=0,s.stack.push(e),Promise.resolve().then(o);if(e.dispose){var a=e.dispose.call(e.value);if(e.async)return i|=2,Promise.resolve(a).then(o,function(d){return r(d),o()})}else i|=1}catch(d){r(d)}if(i===1)return s.hasError?Promise.reject(s.error):Promise.resolve();if(s.hasError)throw s.error}return o()}}(typeof SuppressedError=="function"?SuppressedError:function(n,s,r){var e=new Error(r);return e.name="SuppressedError",e.error=n,e.suppressed=s,e});let ra=(()=>{var m,f,l,u,w,g,qs,Is,Bs,kr,T;let n=z,s=[],r,e,i,o,a,d;return T=class extends n{constructor(O){super();b(this,g);b(this,m,(Zn(this,s),!1));b(this,f);b(this,l,new ce);b(this,u,new Map);A(this,"session");b(this,w,new Map);this.session=O}static async from(O){var E;const j=new T(O);return await R(E=j,g,qs).call(E),j}get closed(){return t(this,m)}get defaultUserContext(){return t(this,u).get(qt.DEFAULT)}get disconnected(){return t(this,f)!==void 0}get disposed(){return this.disconnected}get userContexts(){return t(this,u).values()}dispose(O,j=!1){x(this,m,j),x(this,f,O),this[B]()}async close(){try{await this.session.send("browser.close",{})}finally{this.dispose("Browser already closed.",!0)}}async addPreloadScript(O,j={}){var c;const{result:{script:E}}=await this.session.send("script.addPreloadScript",{functionDeclaration:O,...j,contexts:(c=j.contexts)==null?void 0:c.map(k=>k.id)});return E}async removeIntercept(O){await this.session.send("network.removeIntercept",{intercept:O})}async removePreloadScript(O){await this.session.send("script.removePreloadScript",{script:O})}async createUserContext(){const{result:{userContext:O}}=await this.session.send("browser.createUserContext",{});return R(this,g,kr).call(this,O)}[(r=[be],e=[$(O=>t(O,f))],i=[$(O=>t(O,f))],o=[$(O=>t(O,f))],a=[$(O=>t(O,f))],d=[$(O=>t(O,f))],B)](){t(this,f)??x(this,f,"Browser was disconnected, probably because the session ended."),this.closed&&this.emit("closed",{reason:t(this,f)}),this.emit("disconnected",{reason:t(this,f)}),t(this,l).dispose(),super[B]()}},m=new WeakMap,f=new WeakMap,l=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakSet,qs=async function(){const O=t(this,l).use(new z(this.session));O.once("ended",({reason:j})=>{this.dispose(j)}),O.on("script.realmCreated",j=>{j.type==="shared-worker"&&t(this,w).set(j.realm,dr.from(this,j.realm,j.origin))}),await R(this,g,Is).call(this),await R(this,g,Bs).call(this)},Is=async function(){const{result:{userContexts:O}}=await this.session.send("browser.getUserContexts",{});for(const j of O)R(this,g,kr).call(this,j.userContext)},Bs=async function(){const O=new Set;let j;{const E={stack:[],error:void 0,hasError:!1};try{ea(E,new z(this.session),!1).on("browsingContext.contextCreated",F=>{O.add(F.context)});const{result:k}=await this.session.send("browsingContext.getTree",{});j=k.contexts}catch(c){E.error=c,E.hasError=!0}finally{ta(E)}}for(const E of j)O.has(E.context)||this.session.emit("browsingContext.contextCreated",E),E.children&&j.push(...E.children)},kr=function(O){const j=qt.create(this,O);t(this,u).set(j.id,j);const E=t(this,l).use(new z(j));return E.once("closed",()=>{E.removeAllListeners(),t(this,u).delete(j.id)}),j},(()=>{const O=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;He(T,null,r,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:j=>"dispose"in j,get:j=>j.dispose},metadata:O},null,s),He(T,null,e,{kind:"method",name:"close",static:!1,private:!1,access:{has:j=>"close"in j,get:j=>j.close},metadata:O},null,s),He(T,null,i,{kind:"method",name:"addPreloadScript",static:!1,private:!1,access:{has:j=>"addPreloadScript"in j,get:j=>j.addPreloadScript},metadata:O},null,s),He(T,null,o,{kind:"method",name:"removeIntercept",static:!1,private:!1,access:{has:j=>"removeIntercept"in j,get:j=>j.removeIntercept},metadata:O},null,s),He(T,null,a,{kind:"method",name:"removePreloadScript",static:!1,private:!1,access:{has:j=>"removePreloadScript"in j,get:j=>j.removePreloadScript},metadata:O},null,s),He(T,null,d,{kind:"method",name:"createUserContext",static:!1,private:!1,access:{has:j=>"createUserContext"in j,get:j=>j.createUserContext},metadata:O},null,s),O&&Object.defineProperty(T,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:O})})(),T})();/**
 * @license
 * Copyright 2024 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var or=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},qe=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0};let sa=(()=>{var l,u,w,g,S,Vs,h;let n=z,s=[],r,e=[],i=[],o,a,d,m,f;return h=class extends n{constructor(P,D){super();b(this,S);b(this,l,or(this,s));b(this,u,new ce);b(this,w);A(this,"browser");b(this,g,or(this,e,void 0));or(this,i),x(this,w,D),this.connection=P}static async from(P,D){var E;const{result:O}=await P.send("session.new",{capabilities:D}),j=new h(P,O);return await R(E=j,S,Vs).call(E),j}get connection(){return t(this,g)}set connection(P){x(this,g,P)}get capabilities(){return t(this,w).capabilities}get disposed(){return this.ended}get ended(){return t(this,l)!==void 0}get id(){return t(this,w).sessionId}dispose(P){x(this,l,P),this[B]()}async send(P,D){return await this.connection.send(P,D)}async subscribe(P,D){await this.send("session.subscribe",{events:P,contexts:D})}async addIntercepts(P,D){await this.send("session.subscribe",{events:P,contexts:D})}async end(){try{await this.send("session.end",{})}finally{this.dispose("Session already ended.")}}[(r=[Zt()],o=[be],a=[$(P=>t(P,l))],d=[$(P=>t(P,l))],m=[$(P=>t(P,l))],f=[$(P=>t(P,l))],B)](){t(this,l)??x(this,l,"Session already destroyed, probably because the connection broke."),this.emit("ended",{reason:t(this,l)}),t(this,u).dispose(),super[B]()}},l=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakSet,Vs=async function(){this.browser=await ra.from(this),t(this,u).use(this.browser).once("closed",({reason:O})=>{this.dispose(O)});const D=new WeakSet;this.on("browsingContext.fragmentNavigated",O=>{D.has(O)||(D.add(O),this.emit("browsingContext.navigationStarted",O),this.emit("browsingContext.fragmentNavigated",O))})},(()=>{const P=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;qe(h,null,r,{kind:"accessor",name:"connection",static:!1,private:!1,access:{has:D=>"connection"in D,get:D=>D.connection,set:(D,O)=>{D.connection=O}},metadata:P},e,i),qe(h,null,o,{kind:"method",name:"dispose",static:!1,private:!1,access:{has:D=>"dispose"in D,get:D=>D.dispose},metadata:P},null,s),qe(h,null,a,{kind:"method",name:"send",static:!1,private:!1,access:{has:D=>"send"in D,get:D=>D.send},metadata:P},null,s),qe(h,null,d,{kind:"method",name:"subscribe",static:!1,private:!1,access:{has:D=>"subscribe"in D,get:D=>D.subscribe},metadata:P},null,s),qe(h,null,m,{kind:"method",name:"addIntercepts",static:!1,private:!1,access:{has:D=>"addIntercepts"in D,get:D=>D.addIntercepts},metadata:P},null,s),qe(h,null,f,{kind:"method",name:"end",static:!1,private:!1,access:{has:D=>"end"in D,get:D=>D.end},metadata:P},null,s),P&&Object.defineProperty(h,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:P})})(),h})();/**
 * @license
 * Copyright 2022 Google Inc.
 * SPDX-License-Identifier: Apache-2.0
 */var ia=function(n,s,r,e,i,o){function a(p){if(p!==void 0&&typeof p!="function")throw new TypeError("Function expected");return p}for(var d=e.kind,m=d==="getter"?"get":d==="setter"?"set":"value",f=!s&&n?e.static?n:n.prototype:null,l=s||(f?Object.getOwnPropertyDescriptor(f,e.name):{}),u,w=!1,g=r.length-1;g>=0;g--){var S={};for(var y in e)S[y]=y==="access"?{}:e[y];for(var y in e.access)S.access[y]=e.access[y];S.addInitializer=function(p){if(w)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(p||null))};var h=(0,r[g])(d==="accessor"?{get:l.get,set:l.set}:l[m],S);if(d==="accessor"){if(h===void 0)continue;if(h===null||typeof h!="object")throw new TypeError("Object expected");(u=a(h.get))&&(l.get=u),(u=a(h.set))&&(l.set=u),(u=a(h.init))&&i.unshift(u)}else(u=a(h))&&(d==="field"?i.unshift(u):l[m]=u)}f&&Object.defineProperty(f,e.name,l),w=!0},ns=function(n,s,r){for(var e=arguments.length>2,i=0;i<s.length;i++)r=e?s[i].call(n,r):s[i].call(n);return e?r:void 0},as=function(n,s,r){return typeof s=="symbol"&&(s=s.description?"[".concat(s.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:r?"".concat(r," ",s):s})};let ha=(()=>{var o,a,d,Se,Ks,l,u,w,g,S,y,h,Ws,Js,Gs,Pr;let n=Ji,s,r=[],e=[],i;return o=class extends n{constructor(E,c){super();b(this,d);A(this,"protocol","webDriverBiDi");b(this,a,ns(this,r,new z));b(this,l,ns(this,e));b(this,u);b(this,w);b(this,g);b(this,S,new WeakMap);b(this,y,new Vn(this));b(this,h);x(this,l,c.process),x(this,u,c.closeCallback),x(this,w,E),x(this,g,c.defaultViewport),x(this,h,c.cdpConnection)}static async create(E){var F,_,N;const c=await sa.from(E.connection,{firstMatch:(F=E.capabilities)==null?void 0:F.firstMatch,alwaysMatch:{...(_=E.capabilities)==null?void 0:_.alwaysMatch,acceptInsecureCerts:E.acceptInsecureCerts,unhandledPromptBehavior:{default:"ignore"},webSocketUrl:!0,"goog:prerenderingDisabled":!0}});await c.subscribe(c.capabilities.browserName.toLocaleLowerCase().includes("firefox")?o.subscribeModules:[...o.subscribeModules,...o.subscribeCdpEvents]);const k=new o(c.browser,E);return R(N=k,d,Ws).call(N),k}get cdpSupported(){return t(this,h)!==void 0}get cdpConnection(){return t(this,h)}async userAgent(){return t(this,w).session.capabilities.userAgent}get connection(){return t(this,w).session.connection}wsEndpoint(){return this.connection.url}async close(){var E;if(!this.connection.closed)try{await t(this,w).close(),await((E=t(this,u))==null?void 0:E.call(null))}catch(c){Q(c)}finally{this.connection.dispose()}}get connected(){return!t(this,w).disconnected}process(){return t(this,l)??null}async createBrowserContext(E){const c=await t(this,w).createUserContext();return R(this,d,Pr).call(this,c)}async version(){return`${t(this,d,Js)}/${t(this,d,Gs)}`}browserContexts(){return[...t(this,w).userContexts].map(E=>t(this,S).get(E))}defaultBrowserContext(){return t(this,S).get(t(this,w).defaultUserContext)}newPage(){return this.defaultBrowserContext().newPage()}targets(){return[t(this,y),...this.browserContexts().flatMap(E=>E.targets())]}target(){return t(this,y)}async disconnect(){try{await t(this,w).session.end()}catch(E){Q(E)}finally{this.connection.dispose()}}get debugInfo(){return{pendingProtocolErrors:this.connection.getPendingProtocolErrors()}}},a=new WeakMap,d=new WeakSet,Se=function(){return i.get.call(this)},Ks=function(E){return i.set.call(this,E)},l=new WeakMap,u=new WeakMap,w=new WeakMap,g=new WeakMap,S=new WeakMap,y=new WeakMap,h=new WeakMap,Ws=function(){var E;for(const c of t(this,w).userContexts)R(this,d,Pr).call(this,c);t(this,w).once("disconnected",()=>{t(this,d,Se).emit("disconnected",void 0),t(this,d,Se).removeAllListeners()}),(E=t(this,l))==null||E.once("close",()=>{t(this,w).dispose("Browser process exited.",!0),this.connection.dispose()})},Js=function(){return t(this,w).session.capabilities.browserName},Gs=function(){return t(this,w).session.capabilities.browserVersion},Pr=function(E){const c=Yn.from(this,E,{defaultViewport:t(this,g)});return t(this,S).set(E,c),c.trustedEmitter.on("targetcreated",k=>{t(this,d,Se).emit("targetcreated",k)}),c.trustedEmitter.on("targetchanged",k=>{t(this,d,Se).emit("targetchanged",k)}),c.trustedEmitter.on("targetdestroyed",k=>{t(this,d,Se).emit("targetdestroyed",k)}),c},(()=>{const E=typeof Symbol=="function"&&Symbol.metadata?Object.create(n[Symbol.metadata]??null):void 0;s=[Zt()],ia(o,i={get:as(function(){return t(this,a)},"#trustedEmitter","get"),set:as(function(c){x(this,a,c)},"#trustedEmitter","set")},s,{kind:"accessor",name:"#trustedEmitter",static:!1,private:!0,access:{has:c=>Nt(d,c),get:c=>t(c,d,Se),set:(c,k)=>{x(c,d,k,Ks)}},metadata:E},r,e),E&&Object.defineProperty(o,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:E})})(),A(o,"subscribeModules",["browsingContext","network","log","script"]),A(o,"subscribeCdpEvents",["goog:cdp.Debugger.scriptParsed","goog:cdp.CSS.styleSheetAdded","goog:cdp.Runtime.executionContextsCleared","goog:cdp.Tracing.tracingComplete","goog:cdp.Network.requestWillBeSent","goog:cdp.Debugger.scriptParsed","goog:cdp.Page.screencastFrame"]),o})();export{ha as BidiBrowser,Yn as BidiBrowserContext,Yi as BidiConnection,It as BidiElementHandle,Tn as BidiFrame,$e as BidiFrameRealm,Ps as BidiHTTPRequest,_n as BidiHTTPResponse,Me as BidiJSHandle,Nn as BidiKeyboard,Rn as BidiMouse,Bt as BidiPage,Ns as BidiRealm,$n as BidiTouchscreen,vr as BidiWorkerRealm,Ms as bidiToPuppeteerCookie,Us as cdpSpecificCookiePropertiesFromPuppeteerToBidi,la as connectBidiOverCdp,Ls as convertCookiesExpiryCdpToBiDi,Bn as convertCookiesPartitionKeyFromPuppeteerToBiDi,zs as convertCookiesSameSiteCdpToBiDi,ks as requests};
